(self.webpackChunkmfe_prompt=self.webpackChunkmfe_prompt||[]).push([["src_environment_ts-src_plugins_logger_index_ts-src_App_vue-webpack_sharing_consume_default_it-deef0c"],{1390:(t,e,a)=>{"use strict";a.d(e,{by:()=>r,Tf:()=>c,SX:()=>p,uS:()=>s,fc:()=>i,kV:()=>n,qc:()=>u,xW:()=>d,TK:()=>m,Mc:()=>g});const o=t=>new URLSearchParams(window.location.search).get(t)||"",n=(t,e)=>{localStorage.setItem(`${t}-sso-opt-out`,Date.now().toString()),e.dispatchCaptainsLog(`${t}_sso_registration_dont_ask_me_again`)},r=(t,e,a)=>{a.dispatchCaptainsLog(`${t}_sso_registration_cancel`),a.dispatchGoogleAnalyticsLog(`${t}-sso-${e}-registration-x`)},s=(t,e,a)=>{a.dispatchCaptainsLog(`${t}_sso_registration_success`),a.dispatchGoogleAnalyticsLog(`${t}-sso-${e}-registration-success`),localStorage.setItem(`${t}-sso-opt-out`,Date.now().toString()),localStorage.setItem("sso-successful-registration",Date.now().toString());const n=o("redirectUri");n?window.location.href=n:window.location.reload()},i=(t,e,a)=>{a.dispatchCaptainsLog(`${t}_sso_registration_failure`),a.dispatchGoogleAnalyticsLog(`${t}-sso-${e}-registration-failure`),l()},c=()=>{const t=new CustomEvent("pharos-toast-open",{detail:{content:"Your personal account was created successfully!"}});document.dispatchEvent(t)},l=()=>{const t=new CustomEvent("pharos-toast-open",{detail:{status:"error",content:'\n        Sorry, we were unable to create a personal account. Please try again. If you continue to see this error, <mfe-prompt-pharos-link href="/contact-us/" target="_blank" is-on-background bold>contact JSTOR Support</mfe-prompt-pharos-link>.\n      '}});document.dispatchEvent(t)},p=t=>{let e=o(`${t}_data`);if(e)return JSON.parse(window.atob(e));return e=((t,e)=>{if(!t)return"";let a;try{a=new URL(decodeURIComponent(t))}catch(e){console.warn("Invalid URL:",e),a=new URL(decodeURIComponent(t),window.location.origin)}return a.searchParams.get(e)||""})(o("redirectUri"),`${t}_data`),e?JSON.parse(window.atob(e)):""},u=t=>{if(o(`${t}_data`))(t=>{const e=new URLSearchParams(window.location.search);e.delete(t),window.history.replaceState({},"",`${window.location.pathname}?${e}`)})(`${t}_data`);else{((t,e)=>{const a=new URLSearchParams(window.location.search);a.set(t,e),window.history.replaceState({},"",`${window.location.pathname}?${a}`)})("redirectUri",((t,e)=>{if(!t)return t;let a;try{a=new URL(decodeURIComponent(t))}catch(e){console.warn("Invalid URL:",e),a=new URL(decodeURIComponent(t),window.location.origin)}return a.searchParams.delete(e),encodeURIComponent(a.toString())})(o("redirectUri"),`${t}_data`))}},d=()=>{try{const t=p("oauth");if(!t)return!1;const e=t.provider;if(!e||localStorage.getItem(`${e}-sso-opt-out`))return!1}catch(t){return!1}return!0},m=()=>!!p("saml")&&!localStorage.getItem("saml-sso-opt-out"),g=()=>null!==localStorage.getItem("sso-successful-registration")},1574:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>I});var o=a(8139),n=a(3216),r=a(9143);const s=["open","header"],i={"data-sc":"waitlist-prompt__body-text"},c={slot:"footer",class:"waitlist-prompt__buttons"},l=(0,o.defineComponent)({__name:"WaitlistPrompt",props:{userEmail:{},pageType:{}},emits:["user-interaction"],setup(t,{emit:e}){const a=t,l=e,p=(0,o.inject)("logger",new n.A),u=(0,o.ref)(!0),d=(0,o.ref)(!1),m=(0,o.computed)((()=>d.value?"Your interest has been submitted":"Enhance your research on JSTOR")),g=async t=>{try{const e=await(0,r.m)(t);e&&(_(t,e.data?.updateIndividualAccount?.id),h(t,e.data?.updateIndividualAccount?.id))}catch(t){console.error(t)}},h=(t,e)=>{const o={pageType:a.pageType},n=e||null;p.dispatchCaptainsLog(`research_tool_waitlist_prompt_${t}`,{...o,individual_id:n}),p.dispatchGoogleAnalyticsLog(`research_tool_waitlist_prompt_${t}`,{...o,user_id:n})},_=(t,e)=>{const o={action:t,pageType:a.pageType},n=e||null,r="displayed"===t?"displayed":"interaction";p.dispatchCaptainsLog(`gen_ai_waitlist_prompt_${r}`,{...o,individual_id:n}),p.dispatchGoogleAnalyticsLog(`gen_ai_waitlist_prompt_${r}`,{...o,user_id:n})},y=()=>{h("close"),u.value=!1,l("user-interaction")};return(0,o.onMounted)((()=>{_("displayed"),h("open")})),(t,e)=>((0,o.openBlock)(),(0,o.createElementBlock)("mfe-prompt-pharos-modal",{open:u.value,header:m.value,size:"medium","data-testid":"waitlist-prompt-modal",onPharosModalClose:e[3]||(e[3]=t=>(async()=>{h("close_button_click"),y(),await g("declined")})())},[(0,o.createElementVNode)("p",i,[d.value?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[e[4]||(e[4]=(0,o.createTextVNode)(" You'll receive a confirmation email at ")),(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(t.userEmail),1),e[5]||(e[5]=(0,o.createTextVNode)(" shortly. Access will be limited so we can best understand user interaction with this beta feature. An additional email will be sent if and when access becomes available for you to explore. Until then, continue using JSTOR as usual and thank you for your interest! "))],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)(" Sign up to try our interactive research tool in beta. Developed with our community, this tool utilizes advanced technologies, including AI, to help you find relevant materials faster, generate topic ideas, and answer questions about what you're reading. Join our community of users whose feedback is shaping the future of research on JSTOR. ")],64)),e[6]||(e[6]=(0,o.createElementVNode)("br",null,null,-1)),e[7]||(e[7]=(0,o.createElementVNode)("br",null,null,-1)),e[8]||(e[8]=(0,o.createElementVNode)("mfe-prompt-pharos-link",{target:"_blank",href:"https://about-jstor-org.crai.referencistas.com/research-tool/"}," Learn more ",-1)),e[9]||(e[9]=(0,o.createTextVNode)(". "))]),(0,o.createElementVNode)("div",c,[d.value?((0,o.openBlock)(),(0,o.createElementBlock)("mfe-prompt-pharos-button",{key:0,"data-sc":"waitlist-prompt__okay-button",onClick:e[0]||(e[0]=t=>(async()=>{h("acknowledge_button_click"),y()})())}," Okay ")):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createElementVNode)("mfe-prompt-pharos-button",{"data-sc":"waitlist-prompt__decline-button",variant:"secondary",onClick:e[1]||(e[1]=t=>(async()=>{h("decline_button_click"),y(),d.value||await g("declined")})())}," No, thanks "),(0,o.createElementVNode)("mfe-prompt-pharos-button",{"data-sc":"waitlist-prompt__join-button",onClick:e[2]||(e[2]=t=>(async()=>{h("join_button_click"),d.value=!0,await g("joined")})())}," Sign up ")],64))])],40,s))}});var p=a(6469),u=a.n(p),d=a(4754),m=a.n(d),g=a(7826),h=a.n(g),_=a(9501),y=a.n(_),f=a(6921),w=a.n(f),v=a(1926),k=a.n(v),S=a(7905),A={};A.styleTagTransform=k(),A.setAttributes=y(),A.insert=h().bind(null,"head"),A.domAPI=m(),A.insertStyleElement=w();u()(S.A,A);S.A&&S.A.locals&&S.A.locals;const I=(0,a(2547).A)(l,[["__scopeId","data-v-b82866aa"]])},2693:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>T});var o=a(8139),n=a(3216),r=a(959),s=a(5884);var i=a(7579);const c=["open"],l=["onClick"],p=(0,o.defineComponent)({__name:"RolePrompt",props:{pageType:{}},emits:["user-interaction"],setup(t,{emit:e}){const a=t,p=e,u=(0,o.inject)("logger",new n.A),d=(0,o.ref)(!0),m=async t=>{try{const e={promptedForRole:new Date};t&&(e.academic_status=t);const o=await async function(t){const e=await(0,s.A)(),a={preferences:t};return await e.mutate({variables:{input:{account:JSON.stringify(a)}},mutation:r.J1`
      mutation UpdateUserRolePreferences($input: UpdateIndividualAccountInput!) {
        updateIndividualAccount(input: $input) {
          id
          preferences {
            academic_status
            promptedForRole
          }
        }
      }
    `})}(e);if(o){const e=o.data.updateIndividualAccount.id,n={role:t,pageType:a.pageType};u.dispatchCaptainsLog("role_prompt_option_selected",{...n,individual_id:e}),u.dispatchGoogleAnalyticsLog("role_prompt_option_selected",{...n,user_id:e})}}catch(t){console.error(t)}p("user-interaction")};return(t,e)=>((0,o.openBlock)(),(0,o.createElementBlock)("mfe-prompt-pharos-modal",{open:d.value,header:"Complete your profile",size:"small",onPharosModalClose:e[1]||(e[1]=t=>m())},[e[2]||(e[2]=(0,o.createElementVNode)("p",{class:"prompt","data-qa":"role-prompt__prompt"}," Select the option that best describes your role. ",-1)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(i.g),((t,e)=>((0,o.openBlock)(),(0,o.createElementBlock)("mfe-prompt-pharos-button",{key:e,"full-width":"true",class:"role-option",variant:"secondary",onClick:e=>m(t)},(0,o.toDisplayString)(t),9,l)))),128)),(0,o.createElementVNode)("mfe-prompt-pharos-link",{class:"opt-out","data-qa":"role-prompt__opt-out",onClick:e[0]||(e[0]=t=>m())}," No thanks ")],40,c))}});var u=a(6469),d=a.n(u),m=a(4754),g=a.n(m),h=a(7826),_=a.n(h),y=a(9501),f=a.n(y),w=a(6921),v=a.n(w),k=a(1926),S=a.n(k),A=a(3438),I={};I.styleTagTransform=S(),I.setAttributes=f(),I.insert=_().bind(null,"head"),I.domAPI=g(),I.insertStyleElement=v();d()(A.A,I);A.A&&A.A.locals&&A.A.locals;const T=(0,a(2547).A)(p,[["__scopeId","data-v-48544388"]])},3216:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});var o=a(7440);window.dataLayer=window.dataLayer||[];class n{get Name(){return"Logger Worker"}constructor(){Object.defineProperty(this,"_captainsLogger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._captainsLogger=new o.CaptainsLogger("pals","mfe-prompt")}dispatchCaptainsLog(t,e){this._captainsLogger.log({eventType:t,enrichments:[new o.SessionEnrichment],additionalFields:{...e}})}dispatchGoogleAnalyticsLog(t,e){window.dataLayer.push({event:t,...e})}}},3438:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});var o=a(894),n=a.n(o),r=a(5327),s=a.n(r)()(n());s.push([t.id,"\n.prompt[data-v-48544388] {\n  margin-bottom: var(--pharos-spacing-1-x);\n}\n.role-option[data-v-48544388] {\n  margin-bottom: var(--pharos-spacing-one-half-x);\n}\n.opt-out[data-v-48544388] {\n  margin-top: var(--pharos-spacing-one-half-x);\n  cursor: pointer;\n}\n",""]);const i=s},3606:(t,e,a)=>{"use strict";a.d(e,{A:()=>x});var o=a(8139),n=a(2369),r=a(959),s=a(5884),i=a(5730),c=a.n(i);var l=a(1390);a(7260),a(1574);const p=()=>window.location.pathname.includes("/mfe-local-routing/prompt/")||window.location.pathname.includes("/mfe-copper-roof/prompt/"),u=["/","/action/doBasicSearch","/action/doAdvancedSearch"];var d=a(8276);a(2693);var m=a(7579);const g=t=>{if(!t)return;(async function(t){const e=await(0,s.A)(),a={preferences:t};return await e.mutate({variables:{input:{account:JSON.stringify(a)}},mutation:r.J1`
      mutation UpdateUserRolePreferences($input: UpdateIndividualAccountInput!) {
        updateIndividualAccount(input: $input) {
          id
          preferences {
            promptedForWorkspaceCoachMark
          }
        }
      }
    `})})({promptedForWorkspaceCoachMark:new Date}).catch((t=>{console.error(t)}))};var h=a(3216);const _=()=>!!localStorage.getItem("promptedForGenAILoginCoachMark"),y="accessWorkflow",f="if_data",w={register:{title:"Create a free JSTOR account",valuePropositions:["Link account to institutional access","Keep your account after you graduate","Save and organize content with Workspace"]}};var v=a(7310);const k=(t,e)=>{const a=window.location.search,o=new URLSearchParams(a),n=t||o.get(y);if((()=>{const t=(0,v.removeUrlParameters)(window.location.href,[f,y]);history.replaceState({},"",t)})(),!n)return;if(document.querySelector("mfe-access-workflow-pharos-modal[name='AccessWorkflowModal']"))return void S(n,e);const r=document.querySelector("#globalAccessWorkflowMountPoint");r&&new MutationObserver(((t,a)=>{document.querySelector("mfe-access-workflow-pharos-modal[name='AccessWorkflowModal']")&&(a.disconnect(),S(n,e))})).observe(r,{childList:!0})},S=(t,e)=>{window.dispatchEvent(new CustomEvent("mfe-access-workflow:open-modal",{detail:{workflow:t,overrides:e}}))},A=(t,e)=>(0,n.setup)({types:{context:{}},guards:{shouldDisplaySamlPrompt:()=>(0,l.TK)(),shouldDisplayOauthPrompt:()=>(0,l.xW)(),shouldDisplaySuccessfulRegistrationToast:()=>(0,l.Mc)(),shouldDisplayResearchToolWelcomePrompt:({context:t})=>((t,e,a)=>!(!t||null==e)&&"welcomed"!==e.genAIWaitlistStatus&&(a?.access||!1))(t.flags?.genAIWelcomePromptEnabled,t.account?.preferences,t.factCheck?.factCheckSessionV3),shouldDisplayResearchToolWaitlistPrompt:({context:t})=>((t,e,a,o)=>{if(d.WAITLIST_PROMPT_DISABLED)return!1;if(!t||null==e)return!1;const n=["joined","declined","welcomed"].includes(e.genAIWaitlistStatus),r=a?.session?.authenticatedAccounts?.map((t=>t.type)),s=r&&r.includes("Individual")&&r.includes("Institution"),i=o?.access||!1,c=u.includes(window.location.pathname)||window.location.pathname.includes("/stable")||p();return s&&c&&!n&&!i})(t.flags?.genAIWaitlistPromptEnabled,t.account?.preferences,t.userSession,t.factCheck?.factCheckSessionV3),shouldDisplayRolePrompt:({context:t})=>((t,e)=>{if(!t||null==e)return!1;const a=!Boolean(e.promptedForRole)&&!Boolean(e.academic_status),o=m.R.includes(window.location.pathname)||p(),n=!!e.genAIPromptTimestamp&&Date.now()-e.genAIPromptTimestamp<=864e4;return a&&o&&!n})(t.flags?.rolePromptEnabled,t.account?.preferences),shouldDisplayWorkspaceCoachMark:({context:t})=>(t=>{if(!t)return!1;const e=!!t,a=!!t.artstorImageGroupsMigrated,o=!t.promptedForWorkspaceCoachMark;return!location.pathname.includes("/workspace")&&e&&a&&o})(t.account?.preferences),shouldDisplayGenAILoginCoachMark:({context:t})=>(t=>!_()&&"NOT_LOGGED_IN"===t?.type)(t.factCheck?.factCheckSessionV3),shouldDisplayAccessWorkflow:()=>(()=>{const t=window.location.search;return new URLSearchParams(t).has(y)})(),shouldDisplayNonSSOInstitutionalRegistrationPrompt:()=>!!new URLSearchParams(window.location.search).has(f)&&!localStorage.getItem("mfe-prompt:non-sso-institutional-registration-prompt")},actions:{storeAccount:(0,n.assign)({account:({event:t})=>t.output?.userAccount}),storeFactCheck:(0,n.assign)({factCheck:({event:t})=>t.output}),storeSession:(0,n.assign)({userSession:({event:t})=>t.output}),storeSamlPromptData:(0,n.assign)({promptData:()=>{const t=(0,l.SX)("saml");if(t){(0,l.qc)("saml");try{const e="saml",a=t.email,o=t.institutionIds?.[0],n=t.samlToken;return{ssoData:{provider:e,userEmail:a,institutionId:o,formType:t.institutionIds?.length>0?"short-form":"",token:n}}}catch(t){}}}}),storeOauthPromptData:(0,n.assign)({promptData:()=>{const t=(0,l.SX)("oauth");if(t){(0,l.qc)("oauth");try{const e=t.provider||"google",a=t.email,o=t.institutionIds?.[0],n=t.institutionIds?.length>0;return{ssoData:{provider:e,userEmail:a,institutionId:o,hasInstitution:n,formType:n?"institutional":""}}}catch(t){}}}}),storeRolePromptData:(0,n.assign)({promptData:({context:t})=>({pageType:t.pageType})}),storeWaitlistPromptData:(0,n.assign)({promptData:({context:t})=>({pageType:t.pageType,userEmail:t.account?.contact?.email})}),storeWelcomePromptData:(0,n.assign)({promptData:({context:t})=>({pageType:t.pageType,factCheck:t.factCheck?.factCheckSessionV3})}),displaySuccessfulRegistrationToast:()=>{(0,l.Tf)(),localStorage.removeItem("sso-successful-registration")},displayWorkspaceCoachMark:({context:t})=>{document.dispatchEvent(new Event("trigger-workspace-coach-mark")),g(t.account?.preferences)},displayGenAILoginCoachMark:({context:t})=>{document.dispatchEvent(new Event("trigger-genai-login-coach-mark")),localStorage.setItem("promptedForGenAILoginCoachMark",Date.now().toString()),((t,e)=>{const a=new h.A,o={institutionIds:t?.institutions,pageType:e};a.dispatchCaptainsLog("gen_ai_login_coach_mark",{...o})})(t.factCheck,t.pageType)},displayAccessWorkflow:()=>{k()},displayNonSSOInstitutionalRegistrationPrompt:()=>{(()=>{const t=(new Date).toISOString();localStorage.setItem("mfe-prompt:non-sso-institutional-registration-prompt",t),k("REGISTER",w)})()}},actors:{getSession:(0,n.fromPromise)((async()=>await(async()=>{const t=await(0,s.A)();return await t.query({query:r.J1`
        query FetchUserAuthAccounts($uuid: UUID!) {
          session(uuid: $uuid) {
            authenticatedAccounts {
              type
              code
            }
            authenticatedProfiles {
              role
            }
          }
        }
      `,variables:{uuid:c().get("UUID")||""}}).then((t=>t.data)).catch((()=>null))})())),getAccount:(0,n.fromPromise)((async()=>await(async()=>{const t=await(0,s.A)();return await t.query({query:r.J1`
        query FetchIacUser {
          userAccount {
            preferences {
              IacLastUpdateDate
              academic_status
              promptedForRole
              genAIWaitlistStatus
              genAIPromptTimestamp
              artstorImageGroupsMigrated
              promptedForWorkspaceCoachMark
            }
            contact {
              email
            }
            roles
          }
        }
      `}).then((t=>t.data)).catch((()=>null))})())),performFactCheck:(0,n.fromPromise)((async()=>await(async()=>{const t=await(0,s.A)();return await t.query({query:r.J1`
        query MfePromptFactCheckSessionV3($name: String!, $factCheckSessionV3Uuid2: UUID!) {
          factCheckSessionV3(name: $name, uuid: $factCheckSessionV3Uuid2)
        }
      `,variables:{name:"research-tool",factCheckSessionV3Uuid2:c().get("UUID")||""}}).then((t=>t.data)).catch((()=>null))})()))}}).createMachine({id:"prompt",initial:"idle",context:{pageType:t,flags:e},states:{idle:{always:[{target:"evaluate_authentication_based_prompts"}]},evaluate_authentication_based_prompts:{always:[{guard:"shouldDisplaySamlPrompt",target:"display_saml_prompt"},{guard:"shouldDisplayOauthPrompt",target:"display_oauth_prompt"},{guard:"shouldDisplaySuccessfulRegistrationToast",target:"display_successful_registration_toast"},{guard:"shouldDisplayAccessWorkflow",target:"display_access_workflow"},{guard:"shouldDisplayNonSSOInstitutionalRegistrationPrompt",target:"display_non_sso_institutional_registration_prompt"},{target:"hydrate_account"}]},display_oauth_prompt:{entry:["storeOauthPromptData"],on:{"USER INTERACTION":"hydrate_account"}},display_saml_prompt:{entry:["storeSamlPromptData"],on:{"USER INTERACTION":"hydrate_account"}},display_successful_registration_toast:{entry:["displaySuccessfulRegistrationToast"],always:[{target:"hydrate_account"}]},display_access_workflow:{entry:["displayAccessWorkflow"],always:[{target:"hydrate_account"}]},display_non_sso_institutional_registration_prompt:{entry:["displayNonSSOInstitutionalRegistrationPrompt"],always:[{target:"hydrate_account"}]},hydrate_account:{invoke:{id:"fetching-account",src:"getAccount",onDone:{actions:["storeAccount"],target:"hydrate_session"}}},hydrate_session:{invoke:{id:"fetching-session",src:"getSession",onDone:{actions:["storeSession"],target:"hydrate_fact_check"}}},hydrate_fact_check:{invoke:{id:"performing-fact-check",src:"performFactCheck",onDone:{actions:["storeFactCheck"],target:"evaluate_user_based_prompts"}}},evaluate_user_based_prompts:{always:[{guard:"shouldDisplayResearchToolWelcomePrompt",target:"display_gen_ai_welcome_prompt"},{guard:"shouldDisplayResearchToolWaitlistPrompt",target:"display_gen_ai_waitlist_prompt"},{guard:"shouldDisplayRolePrompt",target:"display_role_prompt"},{target:"evaluate_coach_marks"}]},display_gen_ai_waitlist_prompt:{entry:["storeWaitlistPromptData"],on:{"USER INTERACTION":"evaluate_coach_marks"}},display_gen_ai_welcome_prompt:{entry:["storeWelcomePromptData"],on:{"USER INTERACTION":"evaluate_coach_marks"}},display_role_prompt:{entry:["storeRolePromptData"],on:{"USER INTERACTION":"evaluate_coach_marks"}},evaluate_coach_marks:{always:[{guard:"shouldDisplayWorkspaceCoachMark",target:"display_workspace_coach_mark"},{guard:"shouldDisplayGenAILoginCoachMark",target:"display_gen_ai_login_coach_mark"},{target:"done"}]},display_workspace_coach_mark:{entry:["displayWorkspaceCoachMark"],always:[{target:"done"}]},display_gen_ai_login_coach_mark:{entry:["displayGenAILoginCoachMark"],always:[{target:"done"}]},done:{type:"final"}}}),I=(0,o.defineComponent)({__name:"App",props:{pageType:{},flags:{}},setup(t){const e=t,r=(0,o.ref)(),s=(0,o.ref)(),i=(0,o.computed)((()=>{if(!r.value)return null;switch(r.value){case"display_oauth_prompt":case"display_saml_prompt":return(0,o.defineAsyncComponent)((()=>Promise.resolve().then(a.bind(a,7260))));case"display_role_prompt":return(0,o.defineAsyncComponent)((()=>Promise.resolve().then(a.bind(a,2693))));case"display_gen_ai_waitlist_prompt":return(0,o.defineAsyncComponent)((()=>Promise.resolve().then(a.bind(a,1574))));case"display_gen_ai_welcome_prompt":return(0,o.defineAsyncComponent)((()=>a.e("src_prompts_researchToolWelcomePrompt_WelcomePrompt_vue").then(a.bind(a,4903))));default:return null}})),c=A(e.pageType,e.flags),l=(0,n.createActor)(c);l.subscribe((t=>{r.value!==t.value.toString()&&(r.value=t.value.toString(),s.value=t.context.promptData)})),l.start();const p=()=>{l.send({type:"USER INTERACTION"})};return(0,o.onUnmounted)((()=>{l.stop()})),(t,e)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",null,[s.value?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(i.value),(0,o.mergeProps)({key:0},s.value,{onUserInteraction:p}),null,16)):(0,o.createCommentVNode)("v-if",!0)]))}});var T=a(6469),C=a.n(T),b=a(4754),D=a.n(b),P=a(7826),R=a.n(P),E=a(9501),L=a.n(E),U=a(6921),O=a.n(U),$=a(1926),N=a.n($),W=a(7719),M={};M.styleTagTransform=N(),M.setAttributes=L(),M.insert=R().bind(null,"head"),M.domAPI=D(),M.insertStyleElement=O();C()(W.A,M);W.A&&W.A.locals&&W.A.locals;const x=(0,a(2547).A)(I,[["__scopeId","data-v-d5656548"]])},4828:(t,e,a)=>{"use strict";a.d(e,{Kr:()=>s,d_:()=>i,l2:()=>r});var o=a(959),n=a(5884);async function r(t,e){const a=await(0,n.A)();return await a.query({variables:{accountId:t,idType:e},query:o.J1`
        query FetchIacAccount($accountId: String!, $idType: String!) {
          iacAccount(accountId: $accountId, idType: $idType) {
            name
          }
        }
      `}).then((t=>t.data)).catch((()=>null))}async function s(t){const e=await(0,n.A)();return await e.mutate({variables:{input:t},mutation:o.J1`
      mutation RegisterOrLinkUser($input: RegisterOrLinkInput!) {
        registerOrLink(input: $input) {
          error
          created
          message
          loginError
        }
      }
    `})}async function i(){const t=await(0,n.A)();return await t.mutate({variables:{},mutation:o.J1`
      mutation OauthRegister {
        oauthRegister {
          error
          message
          loginError
        }
      }
    `})}},5884:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var o=a(2635),n=a(6940);async function r(){return new o.R({uri:"/ui/data-fetch/gateway",headers:{authorization:"mfe-prompt"},cache:new n.D})}},6269:(t,e,a)=>{"use strict";a.d(e,{u:()=>n});const o={TEST:"test",PROD:"prod",LOCAL:"local"};function n(){return"firefly.jstor.org"===window.location.hostname||"firefly-jstor-org.ithaka-ezproxy.idm.oclc.org"===window.location.hostname||window.location.hostname.match(/^c20n-jstor-.*\.apps\.test\.jstor\.org$/)?o.TEST:"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?o.LOCAL:o.PROD}},7260:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>c});var o=a(8139),n=a(3216),r=a(1390),s=a(4828);const i=["open"],c=(0,o.defineComponent)({__name:"SsoRegistrationPrompt",props:{ssoData:{}},emits:["user-interaction"],setup(t,{emit:e}){const c=e,l=t,p=(0,o.inject)("logger",new n.A),u=(0,o.ref)(!0),d=(0,o.ref)(),m=(0,o.computed)((()=>"saml"===l.ssoData.provider?{component:(0,o.defineAsyncComponent)((()=>a.e("src_prompts_ssoPrompt_SsoRegistrationFormSaml_vue").then(a.bind(a,7800)))),props:{samlSsoData:l.ssoData,institutionName:d.value}}:{component:(0,o.defineAsyncComponent)((()=>a.e("src_prompts_ssoPrompt_SsoRegistrationFormOauth_vue").then(a.bind(a,6596)))),props:{oauthSsoData:l.ssoData,institutionName:d.value}})),g=()=>{p.dispatchCaptainsLog(`sso_${l.ssoData.provider}_registration_prompt_close_button_click`),(0,r.by)(l.ssoData.provider,l.ssoData.formType,p),h()},h=()=>{p.dispatchCaptainsLog(`sso_${l.ssoData.provider}_registration_prompt_close`),u.value=!1,c("user-interaction")};return(0,o.onMounted)((async()=>{p.dispatchCaptainsLog(`sso_${l.ssoData.provider}_registration_prompt_open`);try{if(l.ssoData.institutionId){const t=await(0,s.l2)(l.ssoData.institutionId,"externalId");d.value=t?.iacAccount?.name}}catch(t){console.error(t)}})),(t,e)=>((0,o.openBlock)(),(0,o.createElementBlock)("mfe-prompt-pharos-modal",{"data-testid":"sso-registration-prompt",open:u.value,header:"Unlock more of JSTOR with an account","footer-divider":"",onPharosModalClose:g},[m.value?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(m.value.component),(0,o.mergeProps)({key:0},m.value.props,{onSubmit:h}),null,16)):(0,o.createCommentVNode)("v-if",!0)],40,i))}})},7579:(t,e,a)=>{"use strict";a.d(e,{R:()=>n,g:()=>o});const o=["Undergraduate Student","Graduate Student","Instructor/Faculty","K-12 Teacher","Librarian","Other"],n=["/account/profile","/action/doBasicSearch","/action/doAdvancedSearch"]},7719:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});var o=a(894),n=a.n(o),r=a(5327),s=a.n(r)()(n());s.push([t.id,"\n.prompt[data-v-d5656548] {\n  margin-bottom: var(--pharos-spacing-1-x);\n}\n.role-option[data-v-d5656548] {\n  margin-bottom: var(--pharos-spacing-one-half-x);\n}\n.opt-out[data-v-d5656548] {\n  margin-top: var(--pharos-spacing-one-half-x);\n  cursor: pointer;\n}\n",""]);const i=s},7905:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});var o=a(894),n=a.n(o),r=a(5327),s=a.n(r)()(n());s.push([t.id,"\n.waitlist-prompt__buttons[data-v-b82866aa] {\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: row;\n  gap: var(--pharos-spacing-1-x);\n}\n",""]);const i=s},8276:t=>{const e="prompt",a="/mfe-copper-roof/".concat(e),o="/mfe/".concat(e),n=e.split("-").map((t=>{const e=t[0].toUpperCase(),a=t.slice(1);return"".concat(e).concat(a)})).join("");t.exports={MFE_NAME:e,MFE_NAME_TITLE_CASE:n,DEPLOYED_PATH:a,LOCAL_PATH:o,JSTOR_HOSTS:{LOCAL:"http://localhost:8000",JSTOR_TEST:"https://firefly-jstor-org.crai.referencistas.com",JSTOR_PROD:"https://www-jstor-org.crai.referencistas.com",FORUM_TEST:"https://test-forum-jstor-org.crai.referencistas.com",FORUM_PROD:"https://forum-jstor-org.crai.referencistas.com"},WAITLIST_PROMPT_DISABLED:!0}},8904:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});var o=a(3216);const n={install:t=>{const e=new o.A;t.config.globalProperties.$logger=e,t.provide("logger",e)}}},9143:(t,e,a)=>{"use strict";a.d(e,{m:()=>r});var o=a(959),n=a(5884);async function r(t){const e={preferences:{genAIWaitlistStatus:t,genAIPromptTimestamp:String(Date.now())}},a=await(0,n.A)();return await a.mutate({variables:{input:{account:JSON.stringify(e)}},mutation:o.J1`
      mutation UpdateUserGenAIPreferences($input: UpdateIndividualAccountInput!) {
        updateIndividualAccount(input: $input) {
          id
          preferences {
            genAIWaitlistStatus
            genAIPromptTimestamp
          }
        }
      }
    `})}}}]);