"use strict";(self.webpackChunkmfe_access_workflow=self.webpackChunkmfe_access_workflow||[]).push([["src_components_login_Login_vue-src_assets_google-color-icon_svg-src_assets_google-redirect-im-1a3cee"],{616:(e,t,a)=>{a.r(t),a.d(t,{default:()=>X});var n=a(8151),o=a(6675),i=a(8576),r=a(8623),s=a(8890),l=a(8465);const c=s.J1`
  mutation MFEAccessWorkflowSubmission($loginInput: LoginInput!) {
    userLogin(input: $loginInput) {
      success
      errorCode
      accessPersist
    }
  }
`;var d=a(2847);const u=a.p+"9e30a1c3e93948d22d3c.svg";var A=a(8472),p=a(4814);const g=a.p+"cd7cba72f86e4de11594.svg",m=a.p+"197af95d90def228cb57.svg",v={key:0,class:"oauth-redirect-cta"},h=["src"],f={key:1},C={class:"alternate-access-buttons"},w=["data-sc"],b={class:"authentication-button-content"},y=["src"],k=["value","validated","invalidated","message"],_=["name","type","value","validated","invalidated","message"],E={slot:"message",class:"show-hide"},x=["data-sc","label"],B={class:"other-options"},N=["data-sc"],V=["data-sc"],$={class:"login-button"},L=["data-sc","disabled"],I={class:"authentication-button-content"},F={key:1,class:"registration-cta"},T=["data-sc","data-display"],S={key:2,class:"find-myinstitution-cta"},G=["data-display","data-sc"],j=(0,n.defineComponent)({__name:"Login",props:{showOauthButtons:{type:Boolean},redirectUriPath:{}},emits:["workflow-change","workflow-complete"],setup(e,{emit:t}){const a=e,s=t,j=(0,n.ref)(""),P=(0,n.ref)(""),U=(0,n.ref)(!1),D=(0,n.ref)(!1),q=(0,n.ref)(!0),Y=(0,n.ref)(null),O=(0,n.ref)(!1),R=(0,n.ref)(""),W=(0,n.inject)("personalizationData",{isInstitutionallyAuthed:!1,isIndividuallyAuthed:!1}),H=(0,n.inject)("display","modal"),M=(0,n.inject)("modalOpen",(0,n.ref)(!1)),K=(0,n.inject)("logger",new d.A),J=(0,n.inject)("enabledWorkflows"),z=(0,n.inject)("alert"),Q=(0,n.ref)(null),{showHidePasswordText:X,showHidePasswordLabel:Z,passwordType:ee}=(0,A.A)(Q,K,H,"login"),te=e=>{P.value=e.target?.value},ae=e=>{j.value=e.target?.value},ne=(0,n.computed)(()=>!!J?.institutionFinder&&!W.isInstitutionallyAuthed),oe=(0,n.computed)(()=>!!J?.institutionFinder&&W.isInstitutionallyAuthed),ie=(0,n.computed)(()=>!!J?.register),re=(0,n.computed)(()=>!!P.value.trim()),se=(0,n.computed)(()=>!(q.value||re.value)),le=(0,n.computed)(()=>se.value?"Error: You must enter a valid username or email address":" "),ce=(0,n.computed)(()=>!!j.value.trim()),de=(0,n.computed)(()=>!(q.value||ce.value)),ue=(0,n.computed)(()=>de.value?"Error: You must enter a valid password to log in":" "),Ae=(0,n.computed)(()=>"Google"===R.value?g:m),{encodedRedirectUri:pe}=(0,p.y)(a.redirectUriPath),ge=(0,n.computed)(()=>btoa(`${window.location.host}`)),me=(0,n.computed)(()=>`/login/oidc/google?workflow_name=login&destination=${pe.value}&target=${ge.value}`),ve=(0,n.computed)(()=>`/login/oidc/microsoft?workflow_name=login&destination=${pe.value}&target=${ge.value}`),he=()=>{K.dispatchCaptainsLog("login__password-input__key-press-enter",{display:H}),be()},fe=()=>{K.dispatchCaptainsLog("login__register-link__click",{display:H}),s("workflow-change",r.W.REGISTER)},Ce=()=>{K.dispatchCaptainsLog("login__institution-finder-button__click",{display:H}),s("workflow-change",r.W.INSTITUTION_FINDER)},we=()=>{K.dispatchCaptainsLog("login__forgot-password-link__click",{display:H}),s("workflow-change",r.W.PASSWORD_RESET)},be=()=>{q.value&&(q.value=!1),de.value||se.value||D.value||ye()},ye=async()=>{K.dispatchCaptainsLog("login__attempt",{display:H}),D.value=!0;try{const e=await async function(e,t,a){const n={mutation:c,variables:{loginInput:{login:e,password:t,keepMeLoggedIn:a??!1}},fetchPolicy:"no-cache"},o=await(0,l.A)();return await o.mutate(n)}(P.value,j.value,U.value);if(void 0===e.data?.userLogin?.success)throw new Error("User login success value undefined");e.data.userLogin.success?ke():"oauth_google"===e.data.userLogin.errorCode||"oauth_microsoft"===e.data.userLogin.errorCode?_e(e.data.userLogin.errorCode):Ee(e.data.userLogin.errorCode)}catch(e){xe()}D.value=!1},ke=()=>{K.dispatchCaptainsLog("login__success",{display:H}),s("workflow-complete")},_e=e=>{R.value="oauth_google"===e?"Google":"Microsoft",O.value=!0,K.dispatchCaptainsLog("login__oauth-error-redirect",{display:H}),setTimeout(()=>{window.location.href="oauth_google"===e?me.value:ve.value},5e3)},Ee=e=>{K.dispatchCaptainsLog("login__failure",{display:H,code:e}),z&&z(e)},xe=()=>{K.dispatchCaptainsLog("login__error",{display:H}),z&&z("S044")};return(0,n.watch)(M,(e,t)=>{!1===t&&e!==t&&(j.value="",P.value="",U.value=!1,q.value=!0)}),(e,t)=>O.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",v,[(0,n.createElementVNode)("img",{class:"email-verify-external",src:Ae.value,alt:"Envelope being opened"},null,8,h),(0,n.createElementVNode)("p",null,"Your account is connected with "+(0,n.toDisplayString)(R.value)+".",1),(0,n.createElementVNode)("p",null," One moment while we redirect, next time you can use 'Continue with "+(0,n.toDisplayString)(R.value)+"' button. ",1)])):((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[(0,n.createElementVNode)("div",C,[e.showOauthButtons?((0,n.openBlock)(),(0,n.createBlock)(o.A,{key:0,workflow:(0,n.unref)(r.W).LOGIN,"redirect-uri-path":e.redirectUriPath},null,8,["workflow","redirect-uri-path"])):(0,n.createCommentVNode)("v-if",!0),ne.value?((0,n.openBlock)(),(0,n.createElementBlock)("mfe-access-workflow-pharos-button",{key:1,variant:"secondary","full-width":"","data-sc":`login-${(0,n.unref)(H)}__find-my-institution-button`,"data-qa":"find-my-institution-button",onClick:Ce},[(0,n.createElementVNode)("span",b,[(0,n.createElementVNode)("img",{src:(0,n.unref)(u),alt:"Search icon"},null,8,y),t[2]||(t[2]=(0,n.createTextVNode)(" Find my institution "))])],8,w)):(0,n.createCommentVNode)("v-if",!0)]),e.showOauthButtons||ne.value?((0,n.openBlock)(),(0,n.createBlock)(i.A,{key:0})):(0,n.createCommentVNode)("v-if",!0),(0,n.createElementVNode)("form",{autocomplete:"on",role:"form","data-testid":"login-form",onSubmit:(0,n.withModifiers)(be,["prevent"])},[(0,n.createElementVNode)("mfe-access-workflow-pharos-text-input",{name:"email",type:"email",autocomplete:"email",required:"",placeholder:"Enter a username or email address",value:P.value,validated:re.value,invalidated:se.value,message:le.value,onInput:te,onChange:te},t[3]||(t[3]=[(0,n.createElementVNode)("span",{slot:"label"},"Username or email address",-1)]),40,k),(0,n.createElementVNode)("mfe-access-workflow-pharos-text-input",{class:"password-input",name:(0,n.unref)(ee),type:(0,n.unref)(ee),autocomplete:"current-password",required:"",placeholder:"Enter your password",value:j.value,validated:ce.value,invalidated:de.value,message:ue.value,onKeyup:(0,n.withKeys)(he,["enter"]),onInput:ae,onChange:ae},[t[4]||(t[4]=(0,n.createElementVNode)("span",{slot:"label"},"Password",-1)),(0,n.createElementVNode)("span",E,[(0,n.createElementVNode)("mfe-access-workflow-pharos-link",{ref_key:"showHidePasswordLink",ref:Q,"data-sc":`login-${(0,n.unref)(H)}__show-hide-password-link`,label:(0,n.unref)(Z)},(0,n.toDisplayString)((0,n.unref)(X)),9,x)])],40,_),(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("mfe-access-workflow-pharos-checkbox",{"data-sc":`login-${(0,n.unref)(H)}__stay-logged-in-checkbox`,onChange:t[0]||(t[0]=e=>U.value=!U.value)},t[5]||(t[5]=[(0,n.createElementVNode)("span",{slot:"label"}," Stay logged in ",-1)]),40,N),(0,n.createElementVNode)("mfe-access-workflow-pharos-link",{"data-sc":`login-${(0,n.unref)(H)}__forgot-password-link`,onClick:we}," Forgot password? ",8,V)]),(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("mfe-access-workflow-pharos-button",{ref_key:"loginSubmitButton",ref:Y,"full-width":"",type:"submit","data-sc":`login-${(0,n.unref)(H)}__login-button`,"data-qa":"login-button",disabled:D.value,onClick:t[1]||(t[1]=e=>(0,n.unref)(K).dispatchCaptainsLog("login__login-button__click",{display:(0,n.unref)(H)}))},[(0,n.createElementVNode)("span",I,(0,n.toDisplayString)(D.value?"Processing...":"Log in"),1)],8,L)])],32),ie.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",F,[t[6]||(t[6]=(0,n.createTextVNode)(" Don't have an account? ")),(0,n.createElementVNode)("mfe-access-workflow-pharos-link",{"data-sc":`login-${(0,n.unref)(H)}__register-link`,"data-display":(0,n.unref)(H),onClick:fe},"Register for free ",8,T)])):(0,n.createCommentVNode)("v-if",!0),oe.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",S,[t[7]||(t[7]=(0,n.createTextVNode)(" Need access via another school? ")),(0,n.createElementVNode)("mfe-access-workflow-pharos-link",{"data-display":(0,n.unref)(H),"data-sc":`login-${(0,n.unref)(H)}__find-my-institution-button`,"data-qa":"find-my-institution-button",onClick:Ce},"Find your institution ",8,G)])):(0,n.createCommentVNode)("v-if",!0)]))}});var P=a(1899),U=a.n(P),D=a(8432),q=a.n(D),Y=a(4076),O=a.n(Y),R=a(2571),W=a.n(R),H=a(5935),M=a.n(H),K=a(5740),J=a.n(K),z=a(981),Q={};Q.styleTagTransform=J(),Q.setAttributes=W(),Q.insert=O().bind(null,"head"),Q.domAPI=q(),Q.insertStyleElement=M();U()(z.A,Q);z.A&&z.A.locals&&z.A.locals;const X=(0,a(5164).A)(j,[["__scopeId","data-v-14d01eb6"]])},981:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(5486),o=a.n(n),i=a(1174),r=a.n(i)()(o());r.push([e.id,".registration-cta[data-v-14d01eb6]{margin-top:0;text-align:center}.find-myinstitution-cta[data-v-14d01eb6]{margin-top:0;text-align:center}.password-input[data-v-14d01eb6]{position:relative}.login-button[data-v-14d01eb6]{width:100%;display:flex;justify-content:center;margin:var(--pharos-spacing-1-x) 0;width:100%}.alternate-access-buttons[data-v-14d01eb6]{display:flex;justify-content:center;flex-direction:column;margin-bottom:var(--pharos-spacing-one-and-a-half-x);width:100%;gap:var(--pharos-spacing-1-x)}.alternate-access-buttons[data-v-14d01eb6]:empty{display:none}.authentication-button-content[data-v-14d01eb6]{display:flex;align-items:center;justify-content:center;width:100%;vertical-align:middle;pointer-events:none}.authentication-button-content img[data-v-14d01eb6]{padding-right:var(--pharos-spacing-one-half-x)}.show-hide[data-v-14d01eb6]{position:absolute;right:0;top:0}.other-options[data-v-14d01eb6]{display:flex;justify-content:space-between}.artstor-callout[data-v-14d01eb6]{margin-top:0}.login__support[data-v-14d01eb6]{color:var(--pharos-color-marble-gray-40);margin-bottom:0;text-align:center}.error-alert[data-v-14d01eb6]{padding-bottom:var(--pharos-spacing-1-x)}.oauth-redirect-cta[data-v-14d01eb6]{margin-top:var(--pharos-spacing-1-x);text-align:center}","",{version:3,sources:["webpack://./src/components/login/Login.vue"],names:[],mappings:"AACA,mCACE,YAAA,CACA,iBAAA,CAGF,yCACE,YAAA,CACA,iBAAA,CAGF,iCACE,iBAAA,CAGF,+BACE,UAAA,CACA,YAAA,CACA,sBAAA,CACA,kCAAA,CACA,UAAA,CAGF,2CACE,YAAA,CACA,sBAAA,CACA,qBAAA,CACA,oDAAA,CACA,UAAA,CACA,6BAAA,CAGF,iDACE,YAAA,CAGF,gDACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,UAAA,CACA,qBAAA,CACA,mBAAA,CAEA,oDACE,8CAAA,CAIJ,4BACE,iBAAA,CACA,OAAA,CACA,KAAA,CAGF,gCACE,YAAA,CACA,6BAAA,CAGF,kCACE,YAAA,CAGF,iCACE,wCAAA,CACA,eAAA,CACA,iBAAA,CAGF,8BACE,wCAAA,CAGF,qCACE,oCAAA,CACA,iBAAA",sourcesContent:["\n.registration-cta {\n  margin-top: 0;\n  text-align: center;\n}\n\n.find-myinstitution-cta {\n  margin-top: 0;\n  text-align: center;\n}\n\n.password-input {\n  position: relative;\n}\n\n.login-button {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin: var(--pharos-spacing-1-x) 0;\n  width: 100%;\n}\n\n.alternate-access-buttons {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  margin-bottom: var(--pharos-spacing-one-and-a-half-x);\n  width: 100%;\n  gap: var(--pharos-spacing-1-x);\n}\n\n.alternate-access-buttons:empty {\n  display: none;\n}\n\n.authentication-button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n\n  img {\n    padding-right: var(--pharos-spacing-one-half-x);\n  }\n}\n\n.show-hide {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.other-options {\n  display: flex;\n  justify-content: space-between;\n}\n\n.artstor-callout {\n  margin-top: 0;\n}\n\n.login__support {\n  color: var(--pharos-color-marble-gray-40);\n  margin-bottom: 0;\n  text-align: center;\n}\n\n.error-alert {\n  padding-bottom: var(--pharos-spacing-1-x);\n}\n\n.oauth-redirect-cta {\n  margin-top: var(--pharos-spacing-1-x);\n  text-align: center;\n}\n"],sourceRoot:""}]);const s=r},6639:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(5486),o=a.n(n),i=a(1174),r=a.n(i)()(o());r.push([e.id,".oauth-button-content[data-v-eddced80]{display:flex;align-items:center;justify-content:center;width:100%;vertical-align:middle;pointer-events:none}.oauth-button-content img[data-v-eddced80]{padding-right:var(--pharos-spacing-one-half-x)}","",{version:3,sources:["webpack://./src/components/OauthButtons.vue"],names:[],mappings:"AACA,uCACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,UAAA,CACA,qBAAA,CACA,mBAAA,CAEA,2CACE,8CAAA",sourcesContent:["\n.oauth-button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n\n  img {\n    padding-right: var(--pharos-spacing-one-half-x);\n  }\n}\n"],sourceRoot:""}]);const s=r},6675:(e,t,a)=>{a.d(t,{A:()=>V});var n=a(8151),o=a(2847);const i=a.p+"b03ab40117b01c4a477c.svg",r=a.p+"c85adc4a978057a34e43.svg";var s=a(4814);const l=["data-sc","data-qa","href"],c={class:"oauth-button-content"},d=["src"],u=["data-sc","data-qa","href"],A={class:"oauth-button-content"},p=["src"],g=(0,n.defineComponent)({__name:"OauthButtons",props:{workflow:{},redirectUriPath:{}},setup(e){const t=e,a=(0,n.inject)("logger",new o.A),g=(0,n.inject)("display","default"),{encodedRedirectUri:m}=(0,s.y)(t.redirectUriPath),v=(0,n.computed)(()=>btoa(window.location.host)),h=(0,n.computed)(()=>t.workflow.toLowerCase().replace("_","-")),f=(0,n.computed)(()=>`/login/oidc/google?workflow_name=${h.value}&destination=${m.value}&target=${v.value}`),C=(0,n.computed)(()=>`/login/oidc/microsoft?workflow_name=${h.value}&destination=${m.value}&target=${v.value}`);return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createElementVNode)("mfe-access-workflow-pharos-button",{variant:"secondary","full-width":"","data-sc":`${h.value}-${(0,n.unref)(g)}__${h.value}-with-google-button`,"data-qa":`${h.value}-with-google-button`,href:f.value,onClick:t[0]||(t[0]=e=>(0,n.unref)(a).dispatchCaptainsLog(`${h.value}__${h.value}-with-google-button__click`,{display:(0,n.unref)(g)}))},[(0,n.createElementVNode)("span",c,[(0,n.createElementVNode)("img",{src:(0,n.unref)(r),alt:"Google icon"},null,8,d),t[2]||(t[2]=(0,n.createTextVNode)(" Continue with Google "))])],8,l),(0,n.createElementVNode)("mfe-access-workflow-pharos-button",{variant:"secondary","full-width":"","data-sc":`${h.value}-${(0,n.unref)(g)}__${h.value}-with-microsoft-button`,"data-qa":`${h.value}-with-microsoft-button`,href:C.value,onClick:t[1]||(t[1]=e=>(0,n.unref)(a).dispatchCaptainsLog(`${h.value}__${h.value}-with-microsoft-button__click`,{display:(0,n.unref)(g)}))},[(0,n.createElementVNode)("span",A,[(0,n.createElementVNode)("img",{src:(0,n.unref)(i),alt:"Microsoft icon"},null,8,p),t[3]||(t[3]=(0,n.createTextVNode)(" Continue with Microsoft "))])],8,u)],64))}});var m=a(1899),v=a.n(m),h=a(8432),f=a.n(h),C=a(4076),w=a.n(C),b=a(2571),y=a.n(b),k=a(5935),_=a.n(k),E=a(5740),x=a.n(E),B=a(6639),N={};N.styleTagTransform=x(),N.setAttributes=y(),N.insert=w().bind(null,"head"),N.domAPI=f(),N.insertStyleElement=_();v()(B.A,N);B.A&&B.A.locals&&B.A.locals;const V=(0,a(5164).A)(g,[["__scopeId","data-v-eddced80"]])},7567:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(5486),o=a.n(n),i=a(1174),r=a.n(i)()(o());r.push([e.id,".separator-container[data-v-499a95c6]{width:100%;text-align:center;display:flex;flex-direction:row;align-items:center;margin-bottom:var(--pharos-spacing-one-and-a-half-x)}.line[data-v-499a95c6]{height:1px;background-color:var(--pharos-color-black);width:100%}.or[data-v-499a95c6]{padding:0 var(--pharos-spacing-1-x)}","",{version:3,sources:["webpack://./src/components/Separator.vue"],names:[],mappings:"AACA,sCACE,UAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,oDAAA,CAGF,uBACE,UAAA,CACA,0CAAA,CACA,UAAA,CAGF,qBACE,mCAAA",sourcesContent:["\n.separator-container {\n  width: 100%;\n  text-align: center;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: var(--pharos-spacing-one-and-a-half-x);\n}\n\n.line {\n  height: 1px;\n  background-color: var(--pharos-color-black);\n  width: 100%;\n}\n\n.or {\n  padding: 0 var(--pharos-spacing-1-x);\n}\n"],sourceRoot:""}]);const s=r},8472:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(2638),o=a(8151);function i(e,t,a,i){const r=(0,o.ref)(!1);(0,o.watch)(e,t=>{t&&!r.value&&(r.value=!0,(0,n.useEventListener)(e,"click",s))});const s=e=>{e.preventDefault(),t.dispatchCaptainsLog(`${i}__show-hide-password-link__click`,{display:a}),l.value=!l.value},l=(0,o.ref)(!1),c=(0,o.computed)(()=>l.value?"HIDE":"SHOW"),d=(0,o.computed)(()=>`${c.value.toLowerCase()} password`),u=(0,o.computed)(()=>l.value?"text":"password");return{showHidePasswordText:c,showHidePasswordLabel:d,passwordType:u}}},8576:(e,t,a)=>{a.d(t,{A:()=>w});var n=a(8151);const o={class:"separator-container","data-testid":"separator"};var i=a(1899),r=a.n(i),s=a(8432),l=a.n(s),c=a(4076),d=a.n(c),u=a(2571),A=a.n(u),p=a(5935),g=a.n(p),m=a(5740),v=a.n(m),h=a(7567),f={};f.styleTagTransform=v(),f.setAttributes=A(),f.insert=d().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=g();r()(h.A,f);h.A&&h.A.locals&&h.A.locals;const C={},w=(0,a(5164).A)(C,[["render",function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,t[0]||(t[0]=[(0,n.createElementVNode)("div",{class:"line"},null,-1),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("span",{class:"or"},[(0,n.createElementVNode)("strong",null,"or")])],-1),(0,n.createElementVNode)("div",{class:"line"},null,-1)]))}],["__scopeId","data-v-499a95c6"]])}}]);
//# sourceMappingURL=src_components_login_Login_vue-src_assets_google-color-icon_svg-src_assets_google-redirect-im-1a3cee.ae13b712ec1e068b3cb0.js.map