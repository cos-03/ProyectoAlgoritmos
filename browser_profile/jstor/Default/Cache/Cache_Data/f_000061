"use strict";(self.webpackChunkmfe_heads_up_display=self.webpackChunkmfe_heads_up_display||[]).push([["_yarn_cache_tslib-npm-2_8_1-66590b21b8-3e2e043d5c_zip_node_modules_tslib_tslib_es6_mjs","vendors-_yarn___virtual___apollo-client-virtual-e50801d5fd_0_cache_apollo-client-npm-4_0_5-15-be0ea5"],{3606:(e,t,r)=>{r.d(t,{AQ:()=>d,C6:()=>n,Cl:()=>s,Ju:()=>c,N3:()=>h,YH:()=>o,fX:()=>u,sH:()=>a,xN:()=>f,zs:()=>l});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};function a(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))}function o(e,t){var r,i,n,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}Object.create;function c(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}function u(e,t,r){if(r||2===arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function h(e){return this instanceof h?(this.v=e,this):new h(e)}function d(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){n[e]&&(i[e]=function(t){return new Promise((function(r,i){s.push([e,t,r,i])>1||o(e,t)}))},t&&(i[e]=t(i[e])))}function o(e,t){try{(r=n[e](t)).value instanceof h?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){o("next",e)}function l(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function f(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=c(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){(function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)})(i,n,(t=e[r](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError},9237:(e,t,r)=>{r.r(t),r.d(t,{ApolloCache:()=>cr,ApolloClient:()=>ir,ApolloLink:()=>Ce,CombinedGraphQLErrors:()=>Ke,CombinedProtocolErrors:()=>He,DocumentTransform:()=>Pe,HttpLink:()=>Li,InMemoryCache:()=>wi,LinkError:()=>Ye,LocalStateError:()=>nr,MissingFieldError:()=>ci,NetworkStatus:()=>Tt,Observable:()=>n.Observable,ObservableQuery:()=>Ut,ServerError:()=>sr,ServerParseError:()=>ar,UnconventionalError:()=>$e,build:()=>u,checkFetcher:()=>Ei,concat:()=>ki,createHttpLink:()=>Bi,createSignalIfSupported:()=>Ki,defaultDataIdFromObject:()=>pr,defaultPrinter:()=>Ii,disableExperimentalFragmentVariables:()=>sn,disableFragmentWarnings:()=>rn,empty:()=>Si,enableExperimentalFragmentVariables:()=>nn,execute:()=>qe,fallbackHttpConfig:()=>ji,from:()=>Oi,gql:()=>en,isNetworkRequestSettled:()=>gt,isReference:()=>lr,makeVar:()=>Xr,parseAndCheckHttpResponse:()=>Mi,resetCaches:()=>tn,rewriteURIForGET:()=>Ni,selectHttpOptionsAndBody:()=>Di,selectHttpOptionsAndBodyInternal:()=>Qi,selectURI:()=>Ai,setLogVerbosity:()=>w,split:()=>xi,version:()=>l});var i=r(4568),n=r(2502);function s(e,t,r){const n=new Set(e),s=n.size;return(0,i.visit)(t,{Directive(e){if(n.delete(e.name.value)&&(!r||!n.size))return i.BREAK}}),r?!n.size:n.size<s}const a=!1;function o(e){try{return e()}catch{}}const c=o((()=>globalThis))||o((()=>window))||o((()=>self))||o((()=>global))||o((function(){return o.constructor("return this")()})),l="4.0.5",u="esm",h=new Map;function d(e){const t=h.get(e)||1;return h.set(e,t+1),`${e}:${t}:${Math.random().toString(36).slice(2)}`}function f(e,t=0){const r=d("stringifyForDisplay");return JSON.stringify(e,((e,t)=>void 0===t?r:t),t).split(JSON.stringify(r)).join("<undefined>")}const p="Invariant Violation";class y extends Error{constructor(e=p){super(e),this.name=p,Object.setPrototypeOf(this,y.prototype)}}const m=["debug","log","warn","error","silent"];let b=m.indexOf("silent");function g(e,...t){if(!e)throw k(...t)}function v(e){return function(t,...r){if(m.indexOf(e)>=b){const i=console[e]||console.log;if("number"==typeof t){const e=t;(t=x(e))||(t=E(e,r),r=[])}i(t,...r)}}}function w(e){const t=m[b];return b=Math.max(0,m.indexOf(e)),t}function k(e,...t){return new y(x(e,t)||E(e,t))}g.debug=v("debug"),g.log=v("log"),g.warn=v("warn"),g.error=v("error");const S=Symbol.for("ApolloErrorMessageHandler_"+l);function O(e){if("string"==typeof e)return e;try{return f(e,2).slice(0,1e3)}catch{return"<non-serializable>"}}function x(e,t=[]){if(e)return c[S]&&c[S](e,t.map(O))}function E(e,t=[]){if(e)return"string"==typeof e?t.reduce(((e,t)=>e.replace(/%[sdfo]/,O(t))),e):`An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#${encodeURIComponent(JSON.stringify({version:l,message:e,args:t.map(O)}))}`}class F{isIncrementalResult(e){return!1}prepareRequest(e){return g(!s(["defer"],e.query),64),e}extractErrors(){}startRequest=void 0}function C(e,t){return e.definitions.find((e=>"OperationDefinition"===e.kind&&!!e.name))?.name.value??t}function q(){}const _=q,P="undefined"!=typeof WeakRef?WeakRef:function(e){return{deref:()=>e}},R="undefined"!=typeof WeakMap?WeakMap:Map,T="undefined"!=typeof FinalizationRegistry?FinalizationRegistry:function(){return{register:q,unregister:q}};class M{constructor(e=1/0,t=_){this.max=e,this.dispose=t,this.map=new R,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const e=this.unfinalizedNodes.values();for(let t=0;t<10024;t++){const t=e.next().value;if(!t)break;this.unfinalizedNodes.delete(t);const r=t.key;delete t.key,t.keyRef=new P(r),this.registry.register(r,t,t)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new T(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:e,newer:r}=t;r&&(r.older=e),e&&(e.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return!!t&&(this.deleteNode(t),!0)}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}const N=()=>Object.create(null),{forEach:j,slice:I}=Array.prototype,{hasOwnProperty:D}=Object.prototype;class Q{constructor(e=!0,t=N){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return j.call(e,(e=>t=t.getChildTrie(e))),D.call(t,"data")?t.data:t.data=this.makeData(I.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,i=e.length;t&&r<i;++r){const i=t.mapFor(e[r],!1);t=i&&i.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const r=e[0],i=this.mapFor(r,!1),n=i&&i.get(r);n&&(t=n.removeArray(I.call(e,1)),n.data||n.weak||n.strong&&n.strong.size||i.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let r=t.get(e);return r||t.set(e,r=new Q(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function A(){}class V{constructor(e=1/0,t=A){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:e,newer:r}=t;r&&(r.older=e),e&&(e.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)}}let z=null;const W={};let L=1;function B(e){try{return e()}catch(e){}}const K="@wry/context:Slot",U=B((()=>globalThis))||B((()=>global))||Object.create(null),H=U[K]||Array[K]||function(e){try{Object.defineProperty(U,K,{value:e,enumerable:!1,writable:!1,configurable:!0})}finally{return e}}(class{constructor(){this.id=["slot",L++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=z;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===W)break;return e!==z&&(z.slots[this.id]=t),!0}return z&&(z.slots[this.id]=W),!1}getValue(){if(this.hasValue())return z.slots[this.id]}withValue(e,t,r,i){const n={__proto__:null,[this.id]:e},s=z;z={parent:s,slots:n};try{return t.apply(i,r)}finally{z=s}}static bind(e){const t=z;return function(){const r=z;try{return z=t,e.apply(this,arguments)}finally{z=r}}}static noContext(e,t,r){if(!z)return e.apply(r,t);{const i=z;try{return z=null,e.apply(r,t)}finally{z=i}}}}),{bind:$,noContext:G}=H;const J=new H;const{hasOwnProperty:Y}=Object.prototype,X=Array.from||function(e){const t=[];return e.forEach((e=>t.push(e))),t};function Z(e){const{unsubscribe:t}=e;"function"==typeof t&&(e.unsubscribe=void 0,t())}const ee=[];function te(e,t){if(!e)throw new Error(t||"assertion failure")}function re(e,t){const r=e.length;return r>0&&r===t.length&&e[r-1]===t[r-1]}function ie(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function ne(e){return e.slice(0)}class se{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++se.count}peek(){if(1===this.value.length&&!ce(this))return ae(this),this.value[0]}recompute(e){return te(!this.recomputing,"already recomputing"),ae(this),ce(this)?function(e,t){ye(e),J.withValue(e,oe,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{Z(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(e,t)&&function(e){if(e.dirty=!1,ce(e))return;ue(e)}(e);return ie(e.value)}(this,e):ie(this.value)}setDirty(){this.dirty||(this.dirty=!0,le(this),Z(this))}dispose(){this.setDirty(),ye(this),he(this,((e,t)=>{e.setDirty(),me(e,this)}))}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=ee.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(X(this.deps).forEach((e=>e.delete(this))),this.deps.clear(),ee.push(this.deps),this.deps=null)}}function ae(e){const t=J.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),ce(e)?de(t,e):fe(t,e),t}function oe(e,t){e.recomputing=!0;const{normalizeResult:r}=e;let i;r&&1===e.value.length&&(i=ne(e.value)),e.value.length=0;try{if(e.value[0]=e.fn.apply(null,t),r&&i&&!re(i,e.value))try{e.value[0]=r(e.value[0],i[0])}catch(e){}}catch(t){e.value[1]=t}e.recomputing=!1}function ce(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function le(e){he(e,de)}function ue(e){he(e,fe)}function he(e,t){const r=e.parents.size;if(r){const i=X(e.parents);for(let n=0;n<r;++n)t(i[n],e)}}function de(e,t){te(e.childValues.has(t)),te(ce(t));const r=!ce(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=ee.pop()||new Set;e.dirtyChildren.add(t),r&&le(e)}function fe(e,t){te(e.childValues.has(t)),te(!ce(t));const r=e.childValues.get(t);0===r.length?e.childValues.set(t,ne(t.value)):re(r,t.value)||e.setDirty(),pe(e,t),ce(e)||ue(e)}function pe(e,t){const r=e.dirtyChildren;r&&(r.delete(t),0===r.size&&(ee.length<100&&ee.push(r),e.dirtyChildren=null))}function ye(e){e.childValues.size>0&&e.childValues.forEach(((t,r)=>{me(e,r)})),e.forgetDeps(),te(null===e.dirtyChildren)}function me(e,t){t.parents.delete(e),e.childValues.delete(t),pe(e,t)}se.count=0;const be={setDirty:!0,dispose:!0,forget:!0};function ge(e){const t=new Map,r=e&&e.subscribe;function i(e){const i=J.getValue();if(i){let n=t.get(e);n||t.set(e,n=new Set),i.dependOn(n),"function"==typeof r&&(Z(n),n.unsubscribe=r(e))}}return i.dirty=function(e,r){const i=t.get(e);if(i){const n=r&&Y.call(be,r)?r:"setDirty";X(i).forEach((e=>e[n]())),t.delete(e),Z(i)}},i}let ve;function we(...e){return(ve||(ve=new Q("function"==typeof WeakMap))).lookupArray(e)}const ke=new Set;function Se(e,{max:t=Math.pow(2,16),keyArgs:r,makeCacheKey:i=we,normalizeResult:n,subscribe:s,cache:a=V}=Object.create(null)){const o="function"==typeof a?new a(t,(e=>e.dispose())):a,c=function(){const t=i.apply(null,r?r.apply(null,arguments):arguments);if(void 0===t)return e.apply(null,arguments);let a=o.get(t);a||(o.set(t,a=new se(e)),a.normalizeResult=n,a.subscribe=s,a.forget=()=>o.delete(t));const c=a.recompute(Array.prototype.slice.call(arguments));return o.set(t,a),ke.add(o),J.hasValue()||(ke.forEach((e=>e.clean())),ke.clear()),c};function l(e){const t=e&&o.get(e);t&&t.setDirty()}function u(e){const t=e&&o.get(e);if(t)return t.peek()}function h(e){return!!e&&o.delete(e)}return Object.defineProperty(c,"size",{get:()=>o.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:t,keyArgs:r,makeCacheKey:i,normalizeResult:n,subscribe:s,cache:o}),c.dirtyKey=l,c.dirty=function(){l(i.apply(null,arguments))},c.peekKey=u,c.peek=function(){return u(i.apply(null,arguments))},c.forgetKey=h,c.forget=function(){return h(i.apply(null,arguments))},c.makeCacheKey=i,c.getKey=r?function(){return i.apply(null,r.apply(null,arguments))}:i,Object.freeze(c)}const Oe=Symbol.for("apollo.cacheSize"),xe={...c[Oe]},Ee=Se(((e,t)=>{g(e&&"Document"===e.kind,1);const r=e.definitions.filter((e=>"OperationDefinition"===e.kind));t&&g(1==r.length&&r[0].operation===t,4,t,t,r[0].operation),(0,i.visit)(e,{Field(t,n,s,a){if(t.alias&&("__typename"===t.alias.value||t.alias.value.startsWith("__ac_"))&&t.alias.value!==t.name.value){let n=e,s=[];for(const e of a)n=n[e],n.kind===i.Kind.FIELD&&s.push(n.alias?.value||n.name.value);throw s.splice(-1,1,t.name.value),k(5,t.alias.value,s.join("."),r[0].operation,C(e,"(anonymous)"))}}})}),{max:xe.checkDocument||2e3,cache:M});function Fe(e){return Ee(e),e.definitions.filter((e=>"OperationDefinition"===e.kind))[0]}class Ce{static empty(){return new Ce((()=>n.EMPTY))}static from(e){if(0===e.length)return Ce.empty();const[t,...r]=e;return t.concat(...r)}static split(e,t,r=new Ce(((e,t)=>t(e)))){const i=new Ce(((i,n)=>{const s=e(i);return s?t.request(i,n):r.request(i,n)}));return Object.assign(i,{left:t,right:r})}static execute(e,t,r){return e.request(function(e,{client:t}){const r={query:e.query,variables:e.variables||{},extensions:e.extensions||{},operationName:C(e.query),operationType:Fe(e.query).operation};let i={...e.context};const n=()=>Object.freeze({...i});return Object.defineProperty(r,"setContext",{enumerable:!1,value:e=>{i="function"==typeof e?{...i,...e(n())}:{...i,...e}}}),Object.defineProperty(r,"getContext",{enumerable:!1,value:n}),Object.defineProperty(r,"client",{enumerable:!1,value:t}),r}(t,r),(()=>n.EMPTY))}static concat(...e){return Ce.from(e)}constructor(e){e&&(this.request=e)}split(e,t,r){return this.concat(Ce.split(e,t,r))}concat(...e){return 0===e.length?this:e.reduce(this.combine.bind(this),this)}combine(e,t){const r=new Ce(((r,i)=>e.request(r,(e=>t.request(e,i)))));return Object.assign(r,{left:e,right:t})}request(e,t){throw k(63)}left;right}const qe=Ce.execute;function _e(e){return e}class Pe{transform;cached;resultCache=new WeakSet;getCacheKey(e){return[e]}static identity(){return new Pe(_e,{cache:!1})}static split(e,t,r=Pe.identity()){return Object.assign(new Pe((i=>(e(i)?t:r).transformDocument(i)),{cache:!1}),{left:t,right:r})}constructor(e,t={}){this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=!1!==t.cache,this.resetCache()}resetCache(){if(this.cached){const e=new Q;this.performWork=Se(Pe.prototype.performWork.bind(this),{makeCacheKey:t=>{const r=this.getCacheKey(t);if(r)return g(Array.isArray(r),20),e.lookupArray(r)},max:xe["documentTransform.cache"],cache:M})}}performWork(e){return Ee(e),this.transform(e)}transformDocument(e){if(this.resultCache.has(e))return e;const t=this.performWork(e);return this.resultCache.add(t),t}concat(e){return Object.assign(new Pe((t=>e.transformDocument(this.transformDocument(t))),{cache:!1}),{left:this,right:e})}left;right}function Re(...e){const t={};return e.forEach((e=>{e&&Object.keys(e).forEach((r=>{const i=e[r];void 0!==i&&(t[r]=i)}))})),t}function Te(e,t){return Re(e,t,t.variables&&{variables:Re({...e&&e.variables,...t.variables})})}function Me(e){return(0,i.visit)(e,{FragmentSpread(e){if(!e.directives?.some((({name:e})=>"unmask"===e.value)))return null}})}const Ne=new WeakSet;function je(e){e.size<=(e.max||-1)||Ne.has(e)||(Ne.add(e),setTimeout((()=>{e.clean(),Ne.delete(e)}),100))}const Ie=function(e,t){const r=new M(e,t);return r.set=function(e,t){const r=M.prototype.set.call(this,e,t);return je(this),r},r},De=function(e,t){const r=new V(e,t);return r.set=function(e,t){const r=V.prototype.set.call(this,e,t);return je(this),r},r};const Qe=Object.assign((function(e){return JSON.stringify(e,Ve)}),{reset(){Ae=new De(xe.canonicalStringify||1e3)}});let Ae;function Ve(e,t){if(t&&"object"==typeof t){const e=Object.getPrototypeOf(t);if(e===Object.prototype||null===e){const r=Object.keys(t);if(r.every(ze))return t;const i=JSON.stringify(r);let n=Ae.get(i);if(!n){r.sort();const e=JSON.stringify(r);n=Ae.get(e)||r,Ae.set(i,n),Ae.set(e,n)}const s=Object.create(e);return n.forEach((e=>{s[e]=t[e]})),s}}return t}function ze(e,t,r){return 0===t||r[t-1]<=e}function We(e,t){return"object"==typeof e&&null!==e&&e[Symbol.for("apollo.error")]===t}function Le(e){Object.defineProperty(e,Symbol.for("apollo.error"),{value:e.name,enumerable:!1,writable:!1,configurable:!1})}function Be(e){return e.filter((e=>e)).map((e=>e.message||"Error message not found.")).join("\n")}Qe.reset();class Ke extends Error{static is(e){return We(e,"CombinedGraphQLErrors")}static formatMessage=Be;errors;data;extensions;constructor(e,t=e.errors||[]){super(Ke.formatMessage(t,{result:e,defaultFormatMessage:Be})),this.errors=t,this.data=e.data,this.extensions=e.extensions,this.name="CombinedGraphQLErrors",Le(this),Object.setPrototypeOf(this,Ke.prototype)}}function Ue(e){return e.map((e=>e.message||"Error message not found.")).join("\n")}class He extends Error{static is(e){return We(e,"CombinedProtocolErrors")}static formatMessage=Ue;errors;constructor(e){super(He.formatMessage(e,{defaultFormatMessage:Ue})),this.name="CombinedProtocolErrors",this.errors=e,Le(this),Object.setPrototypeOf(this,He.prototype)}}class $e extends Error{static is(e){return We(e,"UnconventionalError")}constructor(e){super("An error of unexpected shape occurred.",{cause:e}),this.name="UnconventionalError",Le(this),Object.setPrototypeOf(this,$e.prototype)}}const Ge=Symbol();const Je=new WeakSet;const Ye={is:e=>Je.has(e)};function Xe(e=[]){const t={};return e.forEach((e=>{t[e.name.value]=e})),t}function Ze(e){return e.definitions.filter((e=>"FragmentDefinition"===e.kind))}function et(e){return null!==e&&"object"==typeof e}function tt(e){return e.alias?e.alias.value:e.name.value}const rt=new H;function it(e){const t=e.directives?.find((({name:e})=>"unmask"===e.value));if(!t)return"mask";const r=t.arguments?.find((({name:e})=>"mode"===e.value));return r&&"value"in r.value&&"migrate"===r.value.value?"migrate":"unmask"}function nt(e,t,r){return rt.withValue(!0,(()=>{const i=st(e,t,r,!1);return Object.isFrozen(e),i}))}function st(e,t,r,n,s){const{knownChanged:a}=r,o=function(e,t){if(t.has(e))return t.get(e);const r=Array.isArray(e)?[]:{};return t.set(e,r),r}(e,r.mutableTargets);if(Array.isArray(e)){for(const[i,s]of Array.from(e.entries())){if(null===s){o[i]=null;continue}const e=st(s,t,r,n,void 0);a.has(e)&&a.add(o),o[i]=e}return a.has(o)?o:e}for(const c of t.selections){let t;if(n&&a.add(o),c.kind===i.Kind.FIELD){const i=tt(c),s=c.selectionSet;if(t=o[i]||e[i],void 0===t)continue;if(s&&null!==t){const o=st(e[i],s,r,n,void 0);a.has(o)&&(t=o)}o[i]=t}if(c.kind!==i.Kind.INLINE_FRAGMENT||c.typeCondition&&!r.cache.fragmentMatches(c,e.__typename)||(t=st(e,c.selectionSet,r,n,s)),c.kind===i.Kind.FRAGMENT_SPREAD){const i=c.name.value,n=r.fragmentMap[i]||(r.fragmentMap[i]=r.cache.lookupFragment(i));g(n,39,i);const a=it(c);"mask"!==a&&(t=st(e,n.selectionSet,r,"migrate"===a,s))}a.has(t)&&a.add(o)}return"__typename"in e&&!("__typename"in o)&&(o.__typename=e.__typename),Object.keys(o).length!==Object.keys(e).length&&a.add(o),a.has(o)?o:e}const{toString:at,hasOwnProperty:ot}=Object.prototype,ct=Function.prototype.toString,lt=new Map;function ut(e,t){try{return ht(e,t)}finally{lt.clear()}}function ht(e,t){if(e===t)return!0;const r=at.call(e);if(r!==at.call(t))return!1;switch(r){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(yt(e,t))return!0;const r=dt(e),i=dt(t),n=r.length;if(n!==i.length)return!1;for(let e=0;e<n;++e)if(!ot.call(t,r[e]))return!1;for(let i=0;i<n;++i){const n=r[i];if(!ht(e[n],t[n]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==`${t}`;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(yt(e,t))return!0;const i=e.entries(),n="[object Map]"===r;for(;;){const e=i.next();if(e.done)break;const[r,s]=e.value;if(!t.has(r))return!1;if(n&&!ht(s,t.get(r)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{let r=e.byteLength;if(r===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const r=ct.call(e);return r===ct.call(t)&&!function(e,t){const r=e.length-t.length;return r>=0&&e.indexOf(t,r)===r}(r,pt)}}return!1}function dt(e){return Object.keys(e).filter(ft,e)}function ft(e){return void 0!==this[e]}const pt="{ [native code] }";function yt(e,t){let r=lt.get(e);if(r){if(r.has(t))return!0}else lt.set(e,r=new Set);return r.add(t),!1}let mt;const bt=Object.assign((e=>{let t=mt.get(e);return t||(t=(0,i.print)(e),mt.set(e,t)),t}),{reset(){mt=new Ie(xe.print||2e3)}});function gt(e){return 7===e||8===e}function vt(e){return!gt(e)}function wt(e){return!!e.errors?.length}function kt(e,t=()=>{}){return r=>new n.Observable((i=>{let n=t();return r.subscribe({next(t){let r;try{r=e(t,n)}catch(e){i.error(e)}void 0!==r&&i.next(r)},error(e){i.error(e)},complete(){i.complete()}})}))}function St(e){const t={data:e.data};return e.error&&(t.error=e.error),t}function Ot(e){let t=!1;return(0,i.visit)(e,{Directive:{enter(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((e=>"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value)),t))return i.BREAK}}}),t}function xt(e){g("Document"===e.kind,6),g(e.definitions.length<=1,7);const t=e.definitions[0];return g("FragmentDefinition"===t.kind,8),t}bt.reset();const Et=Array.isArray;function Ft(e){return Array.isArray(e)&&e.length>0}function Ct(e,t){Ee(t);const r=qt(""),n=qt(""),s=e=>{for(let t,s=0;s<e.length&&(t=e[s]);++s)if(!Et(t)){if(t.kind===i.Kind.OPERATION_DEFINITION)return r(t.name&&t.name.value);if(t.kind===i.Kind.FRAGMENT_DEFINITION)return n(t.name.value)}return g.error(14),null};let a=0;for(let e=t.definitions.length-1;e>=0;--e)t.definitions[e].kind===i.Kind.OPERATION_DEFINITION&&++a;const o=function(e){const t=new Map,r=new Map;return e.forEach((e=>{e&&(e.name?t.set(e.name,e):e.test&&r.set(e.test,e))})),e=>{let i=t.get(e.name.value);return!i&&r.size&&r.forEach(((t,r)=>{r(e)&&(i=t)})),i}}(e),c=e=>Ft(e)&&e.map(o).some((e=>e&&e.remove)),l=new Map;let u=!1;const h={enter(e){if(c(e.directives))return u=!0,null}},d=(0,i.visit)(t,{Field:h,InlineFragment:h,VariableDefinition:{enter:()=>!1},Variable:{enter(e,t,r,i,n){const a=s(n);a&&a.variables.add(e.name.value)}},FragmentSpread:{enter(e,t,r,i,n){if(c(e.directives))return u=!0,null;const a=s(n);a&&a.fragmentSpreads.add(e.name.value)}},FragmentDefinition:{enter(e,t,r,i){l.set(JSON.stringify(i),e)},leave:(e,t,r,s)=>e===l.get(JSON.stringify(s))?e:a>0&&e.selectionSet.selections.every((e=>e.kind===i.Kind.FIELD&&"__typename"===e.name.value))?(n(e.name.value).removed=!0,u=!0,null):void 0},Directive:{leave(e){if(o(e))return u=!0,null}}});if(!u)return t;const f=e=>(e.transitiveVars||(e.transitiveVars=new Set(e.variables),e.removed||e.fragmentSpreads.forEach((t=>{f(n(t)).transitiveVars.forEach((t=>{e.transitiveVars.add(t)}))}))),e),p=new Set;d.definitions.forEach((e=>{e.kind===i.Kind.OPERATION_DEFINITION?f(r(e.name&&e.name.value)).fragmentSpreads.forEach((e=>{p.add(e)})):e.kind!==i.Kind.FRAGMENT_DEFINITION||0!==a||n(e.name.value).removed||p.add(e.name.value)})),p.forEach((e=>{f(n(e)).fragmentSpreads.forEach((e=>{p.add(e)}))}));const y={enter(e){if(t=e.name.value,!p.has(t)||n(t).removed)return null;var t}};return function(e){return _t(Fe(e)||xt(e),Xe(Ze(e)))?null:e}((0,i.visit)(d,{FragmentSpread:y,FragmentDefinition:y,OperationDefinition:{leave(e){if(e.variableDefinitions){const t=f(r(e.name&&e.name.value)).transitiveVars;if(t.size<e.variableDefinitions.length)return{...e,variableDefinitions:e.variableDefinitions.filter((e=>t.has(e.variable.name.value)))}}}}}))}function qt(e){const t=new Map;return function(r=e){let i=t.get(r);return i||t.set(r,i={variables:new Set,fragmentSpreads:new Set}),i}}function _t(e,t){return!e||e.selectionSet.selections.every((e=>e.kind===i.Kind.FRAGMENT_SPREAD&&_t(t[e.name.value],t)))}function Pt(e,t,r,n){if(r.kind===i.Kind.INT||r.kind===i.Kind.FLOAT)e[t.value]=Number(r.value);else if(r.kind===i.Kind.BOOLEAN||r.kind===i.Kind.STRING)e[t.value]=r.value;else if(r.kind===i.Kind.OBJECT){const i={};r.fields.map((e=>Pt(i,e.name,e.value,n))),e[t.value]=i}else if(r.kind===i.Kind.VARIABLE){const i=(n||{})[r.name.value];e[t.value]=i}else if(r.kind===i.Kind.LIST)e[t.value]=r.values.map((e=>{const r={};return Pt(r,t,e,n),r[t.value]}));else if(r.kind===i.Kind.ENUM)e[t.value]=r.value;else{if(r.kind!==i.Kind.NULL)throw k(19,t.value,r.kind);e[t.value]=null}}function Rt(e){const t={},r=e&&e.variableDefinitions;return r&&r.length&&r.forEach((e=>{e.defaultValue&&Pt(t,e.variable.name,e.defaultValue)})),t}var Tt;function Mt(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":{const r=e.name.value;if("function"==typeof t)return t(r);const i=t&&t[r];return g(i,9,r),i||null}default:return null}}function Nt(e){let t;Ee(e);for(let r of e.definitions){if("OperationDefinition"===r.kind)return r;"FragmentDefinition"!==r.kind||t||(t=r)}if(t)return t;throw k(12)}function jt(e){return"Field"===e.kind}function It({directives:e},t){return!e||!e.length||function(e){const t=[];e&&e.length&&e.forEach((e=>{if(!function({name:{value:e}}){return"skip"===e||"include"===e}(e))return;const r=e.arguments,i=e.name.value;g(r&&1===r.length,16,i);const n=r[0];g(n.name&&"if"===n.name.value,17,i);const s=n.value;g(s&&("Variable"===s.kind||"BooleanValue"===s.kind),18,i),t.push({directive:e,ifArgument:n})}));return t}(e).every((({directive:e,ifArgument:r})=>{let i=!1;return"Variable"===r.value.kind?(i=t&&t[r.value.name.value],g(void 0!==i,15,e.name.value)):i=r.value.value,"skip"===e.name.value?!i:i}))}function Dt(e,{data:t,...r},{data:i,...n},s){return ut(r,n)&&Qt(Nt(e).selectionSet,t,i,{fragmentMap:Xe(Ze(e)),variables:s})}function Qt(e,t,r,i){if(t===r)return!0;const n=new Set;return e.selections.every((e=>{if(n.has(e))return!0;if(n.add(e),!It(e,i.variables))return!0;if(At(e))return!0;if(jt(e)){const n=tt(e),s=t&&t[n],a=r&&r[n],o=e.selectionSet;if(!o)return ut(s,a);const c=Array.isArray(s),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){const e=s.length;if(a.length!==e)return!1;for(let t=0;t<e;++t)if(!Qt(o,s[t],a[t],i))return!1;return!0}return Qt(o,s,a,i)}{const n=Mt(e,i.fragmentMap);if(n)return!!At(n)||Qt(n.selectionSet,t,r,i)}}))}function At(e){return!!e.directives&&e.directives.some(Vt)}function Vt(e){return"nonreactive"===e.name.value}function zt(e){const t=Fe(e);return g(t&&"query"===t.operation,13),t}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error",e[e.streaming=9]="streaming"}(Tt||(Tt={}));const{assign:Wt,hasOwnProperty:Lt}=Object,Bt={loading:!0,networkStatus:Tt.loading,data:void 0,dataState:"empty",partial:!0},Kt={loading:!1,networkStatus:Tt.ready,data:void 0,dataState:"empty",partial:!0};class Ut{options;queryName;_lastWrite;get query(){return this.lastQuery}get variables(){return this.options.variables}unsubscribeFromCache;input;subject;isTornDown;queryManager;subscriptions=new Set;waitForNetworkResult;lastQuery;linkSubscription;pollingInfo;get networkStatus(){return this.subject.getValue().result.networkStatus}constructor({queryManager:e,options:t,transformedQuery:r=e.transform(t.query)}){this.queryManager=e,this.waitForNetworkResult="network-only"===t.fetchPolicy,this.isTornDown=!1,this.subscribeToMore=this.subscribeToMore.bind(this),this.maskResult=this.maskResult.bind(this);const{watchQuery:{fetchPolicy:i="cache-first"}={}}=e.defaultOptions,{fetchPolicy:n=i,initialFetchPolicy:s=("standby"===n?i:n)}=t;this.lastQuery=r,this.options={...t,initialFetchPolicy:s,fetchPolicy:n,variables:this.getVariablesWithDefaults(t.variables)},this.initializeObservablesQueue(),this["@@observable"]=()=>this,Symbol.observable&&(this[Symbol.observable]=()=>this);const a=Fe(this.query);this.queryName=a&&a.name&&a.name.value}initializeObservablesQueue(){this.subject=new n.BehaviorSubject({query:this.query,variables:this.variables,result:Bt,meta:{}});const e=this.subject.pipe((0,n.tap)({subscribe:()=>{this.subject.observed||(this.reobserve(),setTimeout((()=>this.updatePolling())))},unsubscribe:()=>{this.subject.observed||this.tearDownQuery()}}),kt((({query:e,variables:t,result:r,meta:i},n)=>{const{shouldEmit:s}=i;if(r===Bt&&(n.previous=void 0,n.previousVariables=void 0),"standby"===this.options.fetchPolicy||2===s)return;if(1===s)return c();const{previous:a,previousVariables:o}=n;if(a){const i=this.queryManager.getDocumentInfo(e),n=this.queryManager.dataMasking,s=n?i.nonReactiveQuery:e;if((n||i.hasNonreactiveDirective?Dt(s,a,r,t):ut(a,r))&&ut(o,t))return}if(3!==s||this.options.notifyOnNetworkStatusChange&&!ut(a,r))return c();function c(){return n.previous=r,n.previousVariables=t,r}}),(()=>({}))));this.pipe=e.pipe.bind(e),this.subscribe=e.subscribe.bind(e),this.input=new n.Subject,this.input.complete=()=>{},this.input.pipe(this.operator).subscribe(this.subject)}subscribe;pipe;[Symbol.observable];"@@observable";getCacheDiff({optimistic:e=!0}={}){return this.queryManager.cache.diff({query:this.query,variables:this.variables,returnPartialData:!0,optimistic:e})}getInitialResult(e){const t=()=>{const e=this.getCacheDiff(),t=this.options.returnPartialData||e.complete?e.result??void 0:void 0;return this.maskResult({data:t,dataState:e.complete?"complete":void 0===t?"empty":"partial",loading:!e.complete,networkStatus:e.complete?Tt.ready:Tt.loading,partial:!e.complete})};switch(this.queryManager.prioritizeCacheValues?"cache-first":e||this.options.fetchPolicy){case"cache-only":return{...t(),loading:!1,networkStatus:Tt.ready};case"cache-first":return t();case"cache-and-network":return{...t(),loading:!0,networkStatus:Tt.loading};case"standby":return Kt;default:return Bt}}resubscribeCache(){const{variables:e,fetchPolicy:t}=this.options,r=this.query,i="standby"===t||"no-cache"===t||this.waitForNetworkResult,n=!Ht({query:r,variables:e},this.unsubscribeFromCache)&&!this.waitForNetworkResult;if((i||n)&&this.unsubscribeFromCache?.(),i||!n)return;const s={query:r,variables:e,optimistic:!0,watcher:this,callback:e=>{const t=this.queryManager.getDocumentInfo(r);if((t.hasClientExports||t.hasForcedResolvers)&&(s.lastDiff=void 0),s.lastOwnDiff===e)return;const{result:i}=this.subject.getValue();(e.complete||!i.error&&i!==Bt&&i!==Kt)&&(ut(i.data,e.result)||this.scheduleNotify())}},a=this.queryManager.cache.watch(s);this.unsubscribeFromCache=Object.assign((()=>{this.unsubscribeFromCache=void 0,a()}),{query:r,variables:e})}stableLastResult;getCurrentResult(){const{result:e}=this.subject.getValue();let t=e.networkStatus===Tt.error||this.hasObservers()||"no-cache"===this.options.fetchPolicy?e:this.getInitialResult();return t===Bt&&(t=this.getInitialResult()),ut(this.stableLastResult,t)||(this.stableLastResult=t),this.stableLastResult}refetch(e){const{fetchPolicy:t}=this.options,r={pollInterval:0};return r.fetchPolicy="no-cache"===t?"no-cache":"network-only",e&&!ut(this.variables,e)&&(r.variables=this.options.variables=this.getVariablesWithDefaults({...this.variables,...e})),this._lastWrite=void 0,this._reobserve(r,{newNetworkStatus:Tt.refetch})}fetchMore({query:e,variables:t,context:r,errorPolicy:i,updateQuery:n}){g("cache-only"!==this.options.fetchPolicy,78,C(this.query,"(anonymous)"));const s={...Re(this.options,{errorPolicy:"none"},{query:e,context:r,errorPolicy:i}),variables:e?t:{...this.variables,...t},fetchPolicy:"no-cache",notifyOnNetworkStatusChange:this.options.notifyOnNetworkStatusChange};s.query=this.transformDocument(s.query),this.lastQuery=e?this.transformDocument(this.options.query):s.query;let a=!1;const o="no-cache"!==this.options.fetchPolicy;o||g(n,79);const{finalize:c,pushNotification:l}=this.pushOperation(Tt.fetchMore);return l({source:"newNetworkStatus",kind:"N",value:{}},{shouldEmit:3}),this.queryManager.fetchQuery(s,Tt.fetchMore).then((e=>{if(c(),o)this.queryManager.cache.batch({update:t=>{n?t.updateQuery({query:this.query,variables:this.variables,returnPartialData:!0,optimistic:!1},(t=>n(t,{fetchMoreResult:e.data,variables:s.variables}))):t.writeQuery({query:s.query,variables:s.variables,data:e.data})},onWatchUpdated:e=>{e.watcher===this&&(a=!0)}});else{const t=this.getCurrentResult(),r=n(t.data,{fetchMoreResult:e.data,variables:s.variables});l({kind:"N",value:{...t,networkStatus:Tt.ready,loading:!1,data:r,dataState:"streaming"===t.dataState?"streaming":"complete"},source:"network"})}return this.maskResult(e)})).finally((()=>{c(),o&&!a&&l({kind:"N",source:"newNetworkStatus",value:{}},{shouldEmit:1})}))}subscribeToMore(e){const t=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:t=>{const{updateQuery:r,onError:i}=e,{error:n}=t;n?i?i(n):g.error(80,n):r&&this.updateQuery(((e,i)=>r(e,{subscriptionData:t,...i})))}});return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)&&t.unsubscribe()}}applyOptions(e){const t=Re(this.options,e||{});Wt(this.options,t),this.updatePolling()}async setVariables(e){return e=this.getVariablesWithDefaults(e),ut(this.variables,e)?St(this.getCurrentResult()):(this.options.variables=e,this.hasObservers()?this._reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},{newNetworkStatus:Tt.setVariables}):St(this.getCurrentResult()))}updateQuery(e){const{queryManager:t}=this,{result:r,complete:i}=this.getCacheDiff({optimistic:!1}),n=e(r,{variables:this.variables,complete:!!i,previousData:r});n&&(t.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),t.broadcastQueries())}startPolling(e){this.options.pollInterval=e,this.updatePolling()}stopPolling(){this.options.pollInterval=0,this.updatePolling()}applyNextFetchPolicy(e,t){if(t.nextFetchPolicy){const{fetchPolicy:r="cache-first",initialFetchPolicy:i=r}=t;"standby"===r||("function"==typeof t.nextFetchPolicy?t.fetchPolicy=t.nextFetchPolicy.call(t,r,{reason:e,options:t,observable:this,initialFetchPolicy:i}):t.fetchPolicy="variables-changed"===e?i:t.nextFetchPolicy)}return t.fetchPolicy}fetch(e,t,r,i){const s=this.options.fetchPolicy;e.context??={};let a=!1;let{observable:o,fromLink:c}=this.queryManager.fetchObservableWithInfo(e,{networkStatus:t,query:r,onCacheHit:()=>{a=!0},fetchQueryOperator:e=>new n.Observable((r=>{try{return e.subscribe({next(e){a=!0,r.next(e)},error:e=>r.error(e),complete:()=>r.complete()})}finally{a||(h.override=t,this.input.next({kind:"N",source:"newNetworkStatus",value:{resetError:!0},query:l,variables:u,meta:{shouldEmit:3,fetchPolicy:s}}))}})),observableQuery:this});const{query:l,variables:u}=this,h={abort:()=>{f.unsubscribe()},query:l,variables:u};this.activeOperations.add(h);let d=t==Tt.refetch||t==Tt.setVariables;o=o.pipe(i,(0,n.share)());const f=o.pipe((0,n.tap)({next:e=>{"newNetworkStatus"===e.source||"N"===e.kind&&e.value.loading?h.override=t:delete h.override},finalize:()=>this.activeOperations.delete(h)})).subscribe({next:e=>{const t={};d&&"N"===e.kind&&"loading"in e.value&&!e.value.loading&&(d=!1,t.shouldEmit=1),this.input.next({...e,query:l,variables:u,meta:t})}});return{fromLink:c,subscription:f,observable:o}}didWarnCacheOnlyPolling=!1;updatePolling(){if(this.queryManager.ssrMode)return;const{pollingInfo:e,options:{fetchPolicy:t,pollInterval:r}}=this;if(!r||!this.hasObservers()||"cache-only"===t)return void this.cancelPolling();if(e?.interval===r)return;(e||(this.pollingInfo={})).interval=r;const i=()=>{this.pollingInfo&&(vt(this.networkStatus)||this.options.skipPollAttempt?.()?n():this._reobserve({fetchPolicy:"no-cache"===this.options.initialFetchPolicy?"no-cache":"network-only"},{newNetworkStatus:Tt.poll}).then(n,n))},n=()=>{const e=this.pollingInfo;e&&(clearTimeout(e.timeout),e.timeout=setTimeout(i,e.interval))};n()}cancelPolling(){this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),delete this.pollingInfo)}reobserve(e){return this._reobserve(e)}_reobserve(e,t){this.isTornDown=!1;let{newNetworkStatus:r}=t||{};this.queryManager.obsQueries.add(this);const i=r===Tt.refetch||r===Tt.poll,s=this.variables,a=this.options.fetchPolicy,o=Re(this.options,e||{}),c=i?o:Wt(this.options,o),l=this.transformDocument(c.query);this.lastQuery=l,e&&"variables"in e&&(c.variables=this.getVariablesWithDefaults(e.variables)),i||(this.updatePolling(),!e||!e.variables||ut(e.variables,s)||"standby"===c.fetchPolicy||c.fetchPolicy!==a&&"function"!=typeof c.nextFetchPolicy||(this.applyNextFetchPolicy("variables-changed",c),void 0===r&&(r=Tt.setVariables)));const u=this.networkStatus;r||(r=Tt.loading,u!==Tt.loading&&e?.variables&&!ut(e.variables,s)&&(r=Tt.setVariables),"standby"===c.fetchPolicy&&(r=Tt.ready)),"standby"===c.fetchPolicy&&this.cancelPolling(),this.resubscribeCache();const{promise:h,operator:d}=function(e,t){let r,i,s=t;const a=new Promise(((e,t)=>{r=e,i=t})),o=(0,n.tap)({next(t){try{const r=e(t);void 0!==r&&(s=r)}catch(e){i(e)}},finalize:()=>{if(s)r(s);else{const e="The operation was aborted.",t="AbortError";i("undefined"!=typeof DOMException?new DOMException(e,t):Object.assign(new Error(e),{name:t}))}}});return{promise:a,operator:o}}((e=>{switch(e.kind){case"E":throw e.error;case"N":if("newNetworkStatus"!==e.source&&!e.value.loading)return e.value}}),"standby"===c.fetchPolicy?{data:void 0}:void 0),{subscription:f,observable:p,fromLink:y}=this.fetch(c,r,l,d);i||!y&&this.linkSubscription||(this.linkSubscription&&this.linkSubscription.unsubscribe(),this.linkSubscription=f);const m=Object.assign(function(e){return e.catch((()=>{})),e}(h.then((e=>St(this.maskResult(e)))).finally((()=>{this.hasObservers()||0!==this.activeOperations.size||this.tearDownQuery()}))),{retain:()=>{const e=p.subscribe({}),t=()=>e.unsubscribe();return h.then(t,t),m}});return m}hasObservers(){return this.subject.observed}stop(){this.subject.complete(),this.initializeObservablesQueue(),this.tearDownQuery()}tearDownQuery(){this.isTornDown||(this.resetNotifications(),this.unsubscribeFromCache?.(),this.linkSubscription&&(this.linkSubscription.unsubscribe(),delete this.linkSubscription),this.stopPolling(),this.subscriptions.forEach((e=>e.unsubscribe())),this.subscriptions.clear(),this.queryManager.obsQueries.delete(this),this.isTornDown=!0,this.abortActiveOperations(),this._lastWrite=void 0)}transformDocument(e){return this.queryManager.transform(e)}maskResult(e){const t=this.queryManager.maskOperation({document:this.query,data:e.data,fetchPolicy:this.options.fetchPolicy,cause:this});return t===e.data?e:{...e,data:t}}dirty=!1;notifyTimeout;resetNotifications(){this.notifyTimeout&&(clearTimeout(this.notifyTimeout),this.notifyTimeout=void 0),this.dirty=!1}scheduleNotify(){this.dirty||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((()=>this.notify(!0)),0)))}notify(e=!1){if(!e){const e=this.queryManager.getDocumentInfo(this.query);if(e.hasClientExports||e.hasForcedResolvers)return}const{dirty:t}=this;if(this.resetNotifications(),t&&("cache-only"==this.options.fetchPolicy||"cache-and-network"==this.options.fetchPolicy||!this.activeOperations.size)){const e=this.getCacheDiff();ut(e.result,this.getCacheDiff({optimistic:!1}).result)?this.reobserveCacheFirst():this.input.next({kind:"N",value:{data:e.result,dataState:e.complete?"complete":e.result?"partial":"empty",networkStatus:Tt.ready,loading:!1,error:void 0,partial:!e.complete},source:"cache",query:this.query,variables:this.variables,meta:{}})}}activeOperations=new Set;pushOperation(e){let t=!1;const{query:r,variables:i}=this,n=()=>{this.activeOperations.delete(s)},s={override:e,abort:()=>{t=!0,n()},query:r,variables:i};return this.activeOperations.add(s),{finalize:n,pushNotification:(e,n)=>{t||this.input.next({...e,query:r,variables:i,meta:{...n}})}}}calculateNetworkStatus(e){if(e===Tt.streaming)return e;const t=Array.from(this.activeOperations.values()).findLast((e=>Ht(e,this)&&void 0!==e.override));return t?.override??e}abortActiveOperations(){this.activeOperations.forEach((e=>e.abort()))}reset(){const e="cache-only"===this.options.fetchPolicy;this.setResult(e?Kt:Bt,{shouldEmit:e?1:2}),this.abortActiveOperations()}setResult(e,t){this.input.next({source:"setResult",kind:"N",value:e,query:this.query,variables:this.variables,meta:{...t}})}operator=kt((e=>{const{query:t,variables:r,meta:i}=e;if("setResult"===e.source)return{query:t,variables:r,result:e.value,meta:i};if("C"===e.kind||!Ht(e,this))return;let n;const s=this.subject.getValue();if("cache"===e.source){if(n=e.value,n.networkStatus===Tt.ready&&n.partial&&(!this.options.returnPartialData||s.result.networkStatus===Tt.error)&&"cache-only"!==this.options.fetchPolicy)return}else if("network"===e.source)this.waitForNetworkResult&&(this.waitForNetworkResult=!1,this.resubscribeCache()),n="E"===e.kind?{...Ht(s,e)?s.result:{data:void 0,dataState:"empty",partial:!0},error:e.error,networkStatus:Tt.error,loading:!1}:e.value,"E"===e.kind&&"streaming"===n.dataState&&(n.dataState="complete"),n.error&&(i.shouldEmit=1);else if("newNetworkStatus"===e.source){const t=Ht(s,e)?s.result:this.getInitialResult(i.fetchPolicy),{resetError:r}=e.value,a=r?void 0:t.error,o=a?Tt.error:Tt.ready;n={...t,error:a,networkStatus:o}}return g(n),n.error||delete n.error,n.networkStatus=this.calculateNetworkStatus(n.networkStatus),n.loading=vt(n.networkStatus),n=this.maskResult(n),{query:t,variables:r,result:n,meta:i}}));reobserveCacheFirst(){const{fetchPolicy:e,nextFetchPolicy:t}=this.options;"cache-and-network"===e||"network-only"===e?this.reobserve({fetchPolicy:"cache-first",nextFetchPolicy(r,i){return this.nextFetchPolicy=t,"function"==typeof this.nextFetchPolicy?this.nextFetchPolicy(r,i):e}}):this.reobserve()}getVariablesWithDefaults(e){return this.queryManager.getVariables(this.query,e)}}function Ht(e,t){return!!(e&&t&&e.query===t.query&&ut(e.variables,t.variables))}const $t={},Gt=new WeakMap;function Jt(e,t){const r=e[t];"function"==typeof r&&(e[t]=function(){return Gt.set(e,(Gt.get(e)+1)%1e15),r.apply(this,arguments)})}const Yt=new WeakMap;class Xt{lastRequestId=1;cache;queryManager;id;observableQuery;incremental;constructor(e,t){const r=this.cache=e.cache,i=(Yt.get(e)||0)+1;Yt.set(e,i),this.id=i+"",this.observableQuery=t,this.queryManager=e,Gt.has(r)||(Gt.set(r,0),Jt(r,"evict"),Jt(r,"modify"),Jt(r,"reset"))}_lastWrite;get lastWrite(){return(this.observableQuery||this)._lastWrite}set lastWrite(e){(this.observableQuery||this)._lastWrite=e}resetLastWrite(){this.lastWrite=void 0}shouldWrite(e,t){const{lastWrite:r}=this;return!(r&&r.dmCount===Gt.get(this.cache)&&ut(t,r.variables)&&ut(e.data,r.result.data))}get hasNext(){return!!this.incremental&&this.incremental.hasNext}maybeHandleIncrementalResult(e,t,r){const{incrementalHandler:i}=this.queryManager;return i.isIncrementalResult(t)?(this.incremental||=i.startRequest({query:r}),this.incremental.handle(e,t)):t}markQueryResult(e,{document:t,variables:r,errorPolicy:i,cacheWriteBehavior:n}){const s={query:t,variables:r,returnPartialData:!0,optimistic:!0};this.observableQuery?.resetNotifications();const a=0===n,o=a?void 0:this.cache.diff(s);let c=this.maybeHandleIncrementalResult(o?.result,e,t);return a||(Zt(c,i)?this.cache.batch({onWatchUpdated:(e,t)=>{e.watcher===this.observableQuery&&(e.lastOwnDiff=t)},update:e=>{if(this.shouldWrite(c,r))e.writeQuery({query:t,data:c.data,variables:r,overwrite:1===n}),this.lastWrite={result:c,variables:r,dmCount:Gt.get(this.cache)};else if(o&&o.complete)return void(c={...c,data:o.result});const i=e.diff(s);i.complete&&(c={...c,data:i.result})}}):this.lastWrite=void 0),c}markMutationResult(e,t,r=this.cache){const i=[],n=0===t.cacheWriteBehavior;let s=this.maybeHandleIncrementalResult(n?void 0:r.diff({id:"ROOT_MUTATION",query:this.queryManager.getDocumentInfo(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0}).result,e,t.document);if("ignore"===t.errorPolicy&&(s={...s,errors:[]}),wt(s)&&"none"===t.errorPolicy)return Promise.resolve(s);const a=()=>({...s,dataState:this.hasNext?"streaming":"complete"});if(!n&&Zt(s,t.errorPolicy)){i.push({result:s.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});const{updateQueries:e}=t;e&&this.queryManager.getObservableQueries("all").forEach((t=>{const r=t&&t.queryName;if(!r||!Object.hasOwnProperty.call(e,r))return;const n=e[r],{query:s,variables:o}=t,{result:c,complete:l}=t.getCacheDiff({optimistic:!1});if(l&&c){const e=n(c,{mutationResult:a(),queryName:s&&C(s)||void 0,queryVariables:o});e&&i.push({result:e,dataId:"ROOT_QUERY",query:s,variables:o})}}))}let o=t.refetchQueries;if("function"==typeof o&&(o=o(a())),i.length>0||(o||"").length>0||t.update||t.onQueryUpdated||t.removeOptimistic){const e=[];if(this.queryManager.refetchQueries({updateCache:e=>{n||i.forEach((t=>e.write(t)));const{update:r}=t;if(r){if(!n){const r=e.diff({id:"ROOT_MUTATION",query:this.queryManager.getDocumentInfo(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});r.complete&&(s={...s,data:r.result})}this.hasNext||r(e,s,{context:t.context,variables:t.variables})}n||t.keepRootFields||this.hasNext||e.modify({id:"ROOT_MUTATION",fields:(e,{fieldName:t,DELETE:r})=>"__typename"===t?e:r})},include:o,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach((t=>e.push(t))),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(e).then((()=>s))}return Promise.resolve(s)}markMutationOptimistic(e,t){const r="function"==typeof e?e(t.variables,{IGNORE:$t}):e;return r!==$t&&(this.cache.recordOptimisticTransaction((e=>{try{this.markMutationResult({data:r},t,e)}catch(e){g.error(e)}}),this.id),!0)}markSubscriptionResult(e,{document:t,variables:r,errorPolicy:i,cacheWriteBehavior:n}){0!==n&&(Zt(e,i)&&this.cache.write({query:t,result:e.data,dataId:"ROOT_SUBSCRIPTION",variables:r}),this.queryManager.broadcastQueries())}}function Zt(e,t="none"){const r="ignore"===t||"all"===t;let i=!wt(e);return!i&&r&&e.data&&(i=!0),i}class er{defaultOptions;client;clientOptions;assumeImmutableResults;documentTransform;ssrMode;defaultContext;dataMasking;incrementalHandler;localState;queryDeduplication;prioritizeCacheValues=!1;onBroadcast;mutationStore;obsQueries=new Set;fetchCancelFns=new Map;constructor(e){const t=new Pe((e=>this.cache.transformDocument(e)),{cache:!1});this.client=e.client,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientOptions=e.clientOptions,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking,this.localState=e.localState,this.incrementalHandler=e.incrementalHandler;const r=e.documentTransform;this.documentTransform=r?t.concat(r).concat(t):t,this.defaultContext=e.defaultContext||{},(this.onBroadcast=e.onBroadcast)&&(this.mutationStore={})}get link(){return this.client.link}get cache(){return this.client.cache}stop(){this.obsQueries.forEach((e=>e.stop())),this.cancelPendingFetches(k(83))}cancelPendingFetches(e){this.fetchCancelFns.forEach((t=>t(e))),this.fetchCancelFns.clear()}async mutate({mutation:e,variables:t,optimisticResponse:r,updateQueries:i,refetchQueries:s=[],awaitRefetchQueries:a=!1,update:o,onQueryUpdated:c,fetchPolicy:l,errorPolicy:u,keepRootFields:h,context:d}){const f=new Xt(this);e=this.cache.transformForLink(this.transform(e));const{hasClientExports:p}=this.getDocumentInfo(e);t=this.getVariables(e,t),p&&(t=await this.localState.getExportedVariables({client:this.client,document:e,variables:t,context:d}));const y=this.mutationStore&&(this.mutationStore[f.id]={mutation:e,variables:t,loading:!0,error:null}),m=r&&f.markMutationOptimistic(r,{document:e,variables:t,cacheWriteBehavior:"no-cache"===l?0:2,errorPolicy:u,context:d,updateQueries:i,update:o,keepRootFields:h});return this.broadcastQueries(),new Promise(((p,b)=>{const g={};return this.getObservableFromLink(e,{...d,optimisticResponse:m?r:void 0},t,{},!1).observable.pipe(tr(),(0,n.mergeMap)((r=>{const p={...r};return(0,n.from)(f.markMutationResult(p,{document:e,variables:t,cacheWriteBehavior:"no-cache"===l?0:2,errorPolicy:u,context:d,update:o,updateQueries:i,awaitRefetchQueries:a,refetchQueries:s,removeOptimistic:m?f.id:void 0,onQueryUpdated:c,keepRootFields:h}))}))).pipe((0,n.map)((e=>{if(wt(e)&&"none"===u)throw new Ke(e);return y&&(y.loading=!1,y.error=null),e}))).subscribe({next:t=>{if(this.broadcastQueries(),!f.hasNext){const r={data:this.maskOperation({document:e,data:t.data,fetchPolicy:l,cause:g})};wt(t)&&(r.error=new Ke(t)),Object.keys(t.extensions||{}).length&&(r.extensions=t.extensions),p(r)}},error:e=>(y&&(y.loading=!1,y.error=e),m&&this.cache.removeOptimistic(f.id),this.broadcastQueries(),"ignore"===u?p({data:void 0}):"all"===u?p({data:void 0,error:e}):void b(e))})}))}fetchQuery(e,t){return Ee(e.query,i.OperationTypeNode.QUERY),(async()=>(0,n.lastValueFrom)(this.fetchObservableWithInfo(e,{networkStatus:t}).observable.pipe(kt((e=>{switch(e.kind){case"E":throw e.error;case"N":if("newNetworkStatus"!==e.source)return St(e.value)}}))),{defaultValue:{data:void 0}}))()}transform(e){return this.documentTransform.transformDocument(e)}transformCache=new Ie(xe["queryManager.getDocumentInfo"]||2e3);getDocumentInfo(e){const{transformCache:t}=this;if(!t.has(e)){const r=Fe(e),i={hasClientExports:s(["client","export"],e,!0),hasForcedResolvers:Ot(e),hasNonreactiveDirective:s(["nonreactive"],e),hasIncrementalDirective:s(["defer"],e),nonReactiveQuery:rr(e),clientQuery:s(["client"],e)?e:null,serverQuery:Ct([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),operationType:r?.operation,defaultVars:Rt(r),asQuery:{...e,definitions:e.definitions.map((e=>"OperationDefinition"===e.kind&&"query"!==e.operation?{...e,operation:"query"}:e))}};t.set(e,i)}const r=t.get(e);if(r.violation)throw r.violation;return r}getVariables(e,t){const r=this.getDocumentInfo(e).defaultVars,i=Object.entries(t??{}).map((([e,t])=>[e,void 0===t?r[e]:t]));return{...r,...Object.fromEntries(i)}}watchQuery(e){Ee(e.query,i.OperationTypeNode.QUERY);const t=this.transform(e.query);void 0===(e={...e,variables:this.getVariables(t,e.variables)}).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!0);return new Ut({queryManager:this,options:e,transformedQuery:t})}query(e){const t=this.transform(e.query);return this.fetchQuery({...e,query:t}).then((r=>({...r,data:this.maskOperation({document:t,data:r?.data,fetchPolicy:e.fetchPolicy})})))}requestIdCounter=1;generateRequestId(){return this.requestIdCounter++}clearStore(e={discardWatches:!0}){return this.cancelPendingFetches(k(85)),this.obsQueries.forEach((e=>{e.reset()})),this.mutationStore&&(this.mutationStore={}),this.cache.reset(e)}getObservableQueries(e="active"){const t=new Set,r=new Map,i=new Map,n=new Set;return Array.isArray(e)&&e.forEach((e=>{if("string"==typeof e)r.set(e,e),i.set(e,!1);else if(et(t=e)&&"Document"===t.kind&&Array.isArray(t.definitions)){const t=bt(this.transform(e));r.set(t,C(e)),i.set(t,!1)}else et(e)&&e.query&&n.add(e);var t})),this.obsQueries.forEach((r=>{const n=bt(this.transform(r.options.query));if("all"===e)return void t.add(r);const{queryName:s,options:{fetchPolicy:a}}=r;"active"===e&&"standby"===a||("active"===e||s&&i.has(s)||n&&i.has(n))&&(t.add(r),s&&i.set(s,!0),n&&i.set(n,!0))})),n.size&&n.forEach((e=>{const r=new Ut({queryManager:this,options:{...e,fetchPolicy:"network-only"}});t.add(r)})),t}refetchObservableQueries(e=!1){const t=[];return this.getObservableQueries(e?"all":"active").forEach((r=>{const{fetchPolicy:i}=r.options;!e&&"standby"===i||"cache-only"===i||t.push(r.refetch())})),this.broadcastQueries(),Promise.all(t)}startGraphQLSubscription(e){let{query:t,variables:r}=e;const{fetchPolicy:s,errorPolicy:a="none",context:o={},extensions:c={}}=e;let l;Ee(t,i.OperationTypeNode.SUBSCRIPTION),t=this.transform(t),r=this.getVariables(t,r);const u=(this.getDocumentInfo(t).hasClientExports?(0,n.from)(this.localState.getExportedVariables({client:this.client,document:t,variables:r,context:o})):(0,n.of)(r)).pipe((0,n.mergeMap)((e=>{const{observable:r,restart:i}=this.getObservableFromLink(t,o,e,c),u=new Xt(this);return l=i,r.pipe((0,n.map)((r=>{u.markSubscriptionResult(r,{document:t,variables:e,errorPolicy:a,cacheWriteBehavior:"no-cache"===s?0:2});const i={data:r.data??void 0};return wt(r)?i.error=new Ke(r):function(e){return"extensions"in e&&He.is(e.extensions[Ge])}(r)&&(i.error=r.extensions[Ge],delete r.extensions[Ge]),r.extensions&&Object.keys(r.extensions).length&&(i.extensions=r.extensions),i.error&&"none"===a&&(i.data=void 0),"ignore"===a&&delete i.error,i})),(0,n.catchError)((e=>"ignore"===a?(0,n.of)({data:void 0}):(0,n.of)({data:void 0,error:e}))),(0,n.filter)((e=>!(!e.data&&!e.error))))})));return Object.assign(u,{restart:()=>l?.()})}broadcastQueries(){this.onBroadcast&&this.onBroadcast(),this.obsQueries.forEach((e=>e.notify()))}inFlightLinkObservables=new Q(!1);getObservableFromLink(e,t,r,s,o=t?.queryDeduplication??this.queryDeduplication){let c={};const{serverQuery:l,clientQuery:u,operationType:h,hasIncrementalDirective:d}=this.getDocumentInfo(e),f=C(e),p={client:this.client};if(l){const{inFlightLinkObservables:y,link:m}=this;try{const b=this.incrementalHandler.prepareRequest({query:l,variables:r,context:{...this.defaultContext,...t,queryDeduplication:o},extensions:s});function v(e){return new n.Observable((t=>{function r(){return e.subscribe({next:t.next.bind(t),complete:t.complete.bind(t),error:t.error.bind(t)})}let i=r();return c.restart||=()=>{i.unsubscribe(),i=r()},()=>{i.unsubscribe(),c.restart=void 0}}))}if(t=b.context,o){const w=bt(l),k=Qe(r);c=y.lookup(w,k),c.observable||(c.observable=qe(m,b,p).pipe(v,(0,n.finalize)((()=>{y.peek(w,k)===c&&y.remove(w,k)})),h===i.OperationTypeNode.SUBSCRIPTION?(0,n.share)():(0,n.shareReplay)({refCount:!0})))}else c.observable=qe(m,b,p).pipe(v)}catch(S){c.observable=(0,n.throwError)((()=>S))}}else c.observable=(0,n.of)({data:{}});if(u){const{operation:O}=Fe(e);a,g(!d,90,O[0].toUpperCase()+O.slice(1),f??"(anonymous)"),c.observable=c.observable.pipe((0,n.mergeMap)((e=>(0,n.from)(this.localState.execute({client:this.client,document:u,remoteResult:e,context:t,variables:r})))))}return{restart:()=>c.restart?.(),observable:c.observable.pipe((0,n.catchError)((e=>{throw function(e){Je.add(e)}(e=function(e){return function(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name&&("string"==typeof e.stack||void 0===e.stack)}(e)?e:"string"==typeof e?new Error(e,{cause:e}):new $e(e)}(e)),e})))}}getResultsFromLink(e,{queryInfo:t,cacheWriteBehavior:r,observableQuery:i}){const s=t.lastRequestId=this.generateRequestId(),{errorPolicy:a}=e,o=this.cache.transformForLink(e.query);return this.getObservableFromLink(o,e.context,e.variables).observable.pipe((0,n.map)((n=>{const s=t.markQueryResult(n,{...e,document:o,cacheWriteBehavior:r}),c=wt(s);if(c&&"none"===a)throw t.resetLastWrite(),i?.resetNotifications(),new Ke(s);const l={data:s.data,...t.hasNext?{loading:!0,networkStatus:Tt.streaming,dataState:"streaming",partial:!0}:{dataState:s.data?"complete":"empty",loading:!1,networkStatus:Tt.ready,partial:!s.data}};return c&&("none"===a&&(l.data=void 0,l.dataState="empty"),"ignore"!==a&&(l.error=new Ke(s),"streaming"!==l.dataState&&(l.networkStatus=Tt.error))),l})),(0,n.catchError)((e=>{if(s>=t.lastRequestId&&"none"===a)throw t.resetLastWrite(),i?.resetNotifications(),e;const r={data:void 0,dataState:"empty",loading:!1,networkStatus:Tt.ready,partial:!0};return"ignore"!==a&&(r.error=e,r.networkStatus=Tt.error),(0,n.of)(r)})))}fetchObservableWithInfo(e,{networkStatus:t=Tt.loading,query:r=e.query,fetchQueryOperator:i=e=>e,onCacheHit:s=()=>{},observableQuery:a}){const o=this.getVariables(r,e.variables),c=this.defaultOptions.watchQuery;let{fetchPolicy:l=c&&c.fetchPolicy||"cache-first",errorPolicy:u=c&&c.errorPolicy||"none",returnPartialData:h=!1,notifyOnNetworkStatusChange:d=!0,context:f={}}=e;!this.prioritizeCacheValues||"network-only"!==l&&"cache-and-network"!==l||(l="cache-first");const p=Object.assign({},e,{query:r,variables:o,fetchPolicy:l,errorPolicy:u,returnPartialData:h,notifyOnNetworkStatusChange:d,context:f}),y=new Xt(this,a),m=r=>{p.variables=r;const n="no-cache"===l?0:t===Tt.refetch&&"merge"!==p.refetchWritePolicy?1:2,o=this.fetchQueryByPolicy(p,{queryInfo:y,cacheWriteBehavior:n,onCacheHit:s,observableQuery:a});return o.observable=o.observable.pipe(i),"standby"!==p.fetchPolicy&&a?.applyNextFetchPolicy("after-fetch",e),o},b=()=>{this.fetchCancelFns.delete(y.id)};this.fetchCancelFns.set(y.id,(e=>{g.next({kind:"E",error:e,source:"network"})}));const g=new n.Subject;let v,w;if(this.getDocumentInfo(p.query).hasClientExports)v=(0,n.from)(this.localState.getExportedVariables({client:this.client,document:p.query,variables:p.variables,context:p.context})).pipe((0,n.mergeMap)((e=>m(e).observable))),w=!0;else{const e=m(p.variables);w=e.fromLink,v=e.observable}return{observable:new n.Observable((e=>{e.add(b),v.subscribe(e),g.subscribe(e)})).pipe((0,n.share)()),fromLink:w}}refetchQueries({updateCache:e,include:t,optimistic:r=!1,removeOptimistic:i=(r?d("refetchQueries"):void 0),onQueryUpdated:n}){const s=new Map;t&&this.getObservableQueries(t).forEach((e=>{if("cache-only"===e.options.fetchPolicy)return;const t=e.getCurrentResult();s.set(e,{oq:e,lastDiff:{result:t?.data,complete:!t?.partial}})}));const a=new Map;if(e){const t=new Set;this.cache.batch({update:e,optimistic:r&&i||!1,removeOptimistic:i,onWatchUpdated(e,r,i){const o=e.watcher;if(o instanceof Ut&&!t.has(o)){if(t.add(o),n){s.delete(o);let e=n(o,r,i);return!0===e&&(e=o.refetch().retain()),!1!==e&&a.set(o,e),e}null!==n&&"cache-only"!==o.options.fetchPolicy&&s.set(o,{oq:o,lastDiff:i,diff:r})}}})}return s.size&&s.forEach((({oq:e,lastDiff:t,diff:r})=>{let i;n&&(r||(r=e.getCacheDiff()),i=n(e,r,t)),n&&!0!==i||(i=e.refetch().retain()),!1!==i&&a.set(e,i)})),i&&this.cache.removeOptimistic(i),a}noCacheWarningsByCause=new WeakSet;maskOperation(e){const{document:t,data:r}=e;return this.dataMasking?function(e,t,r){const i=Fe(t);return g(i,43),null==e?e:nt(e,i.selectionSet,{operationType:i.operation,operationName:i.name?.value,fragmentMap:Xe(Ze(t)),cache:r,mutableTargets:new WeakMap,knownChanged:new WeakSet})}(r,t,this.cache):r}maskFragment(e){const{data:t,fragment:r,fragmentName:n}=e;return this.dataMasking?function(e,t,r,n){const s=t.definitions.filter((e=>e.kind===i.Kind.FRAGMENT_DEFINITION));void 0===n&&(g(1===s.length,41,s.length),n=s[0].name.value);const a=s.find((e=>e.name.value===n));return g(!!a,42,n),null==e||ut(e,{})?e:nt(e,a.selectionSet,{operationType:"fragment",operationName:a.name.value,fragmentMap:Xe(Ze(t)),cache:r,mutableTargets:new WeakMap,knownChanged:new WeakSet})}(t,r,this.cache,n):t}fetchQueryByPolicy({query:e,variables:t,fetchPolicy:r,errorPolicy:i,returnPartialData:s,context:a},{cacheWriteBehavior:o,onCacheHit:c,queryInfo:l,observableQuery:u}){const h=()=>this.cache.diff({query:e,variables:t,returnPartialData:!0,optimistic:!0}),d=(r,o)=>{const l=r.result;const u=e=>(r.complete||s||(e=void 0),{data:e,dataState:r.complete?"complete":e?"partial":"empty",loading:vt(o),networkStatus:o,partial:!r.complete}),h=e=>(0,n.of)({kind:"N",value:u(e),source:"cache"});return(r.complete||s)&&this.getDocumentInfo(e).hasForcedResolvers?(c(),(0,n.from)(this.localState.execute({client:this.client,document:e,remoteResult:l?{data:l}:void 0,context:a,variables:t,onlyRunForcedResolvers:!0,returnPartialData:!0}).then((e=>({kind:"N",value:u(e.data||void 0),source:"cache"}))))):"none"===i&&o===Tt.refetch&&r.missing?h(void 0):h(l||void 0)},f=()=>this.getResultsFromLink({query:e,variables:t,context:a,fetchPolicy:r,errorPolicy:i},{cacheWriteBehavior:o,queryInfo:l,observableQuery:u}).pipe(tr(),(0,n.materialize)(),(0,n.map)((e=>({...e,source:"network"}))));switch(r){default:case"cache-first":{const e=h();return e.complete?{fromLink:!1,observable:d(e,Tt.ready)}:s?{fromLink:!0,observable:(0,n.concat)(d(e,Tt.loading),f())}:{fromLink:!0,observable:f()}}case"cache-and-network":{const e=h();return e.complete||s?{fromLink:!0,observable:(0,n.concat)(d(e,Tt.loading),f())}:{fromLink:!0,observable:f()}}case"cache-only":return{fromLink:!1,observable:(0,n.concat)(d(h(),Tt.ready))};case"network-only":case"no-cache":return{fromLink:!0,observable:f()};case"standby":return{fromLink:!1,observable:n.EMPTY}}}}function tr(){let e=!1;return(0,n.tap)({next(){e=!0},complete(){g(e,94)}})}function rr(e){return(0,i.visit)(e,{FragmentSpread:e=>{if(!e.directives?.some((e=>"unmask"===e.name.value)))return{...e,directives:[...e.directives||[],{kind:i.Kind.DIRECTIVE,name:{kind:i.Kind.NAME,value:"nonreactive"}}]}}})}class ir{link;cache;disableNetworkFetches;set prioritizeCacheValues(e){this.queryManager.prioritizeCacheValues=e}get prioritizeCacheValues(){return this.queryManager.prioritizeCacheValues}version;queryDeduplication;defaultOptions;devtoolsConfig;queryManager;devToolsHookCb;resetStoreCallbacks=[];clearStoreCallbacks=[];constructor(e){const{cache:t,documentTransform:r,ssrMode:i=!1,ssrForceFetchDelay:n=0,queryDeduplication:s=!0,defaultOptions:o,defaultContext:c,assumeImmutableResults:u=t.assumeImmutableResults,localState:h,devtools:d,dataMasking:f,link:p,incrementalHandler:y=new F}=e;this.link=p,this.cache=t,this.queryDeduplication=s,this.defaultOptions=o||{},this.devtoolsConfig={...d,enabled:d?.enabled??a},this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.refetchObservableQueries=this.refetchObservableQueries.bind(this),this.version=l,this.queryManager=new er({client:this,defaultOptions:this.defaultOptions,defaultContext:c,documentTransform:r,queryDeduplication:s,ssrMode:i,dataMasking:!!f,clientOptions:e,incrementalHandler:y,assumeImmutableResults:u,onBroadcast:this.devtoolsConfig.enabled?()=>{this.devToolsHookCb&&this.devToolsHookCb()}:void 0,localState:h}),this.prioritizeCacheValues=i||n>0,n&&setTimeout((()=>{this.prioritizeCacheValues=!1}),n),this.devtoolsConfig.enabled&&this.connectToDevTools()}connectToDevTools(){if("undefined"==typeof window)return;const e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this}get documentTransform(){return this.queryManager.documentTransform}get localState(){return this.queryManager.localState}set localState(e){this.queryManager.localState=e}stop(){this.queryManager.stop()}watchQuery(e){return this.defaultOptions.watchQuery&&(e=Te(this.defaultOptions.watchQuery,e)),this.queryManager.watchQuery(e)}query(e){return this.defaultOptions.query&&(e=Te(this.defaultOptions.query,e)),this.queryManager.query(e)}mutate(e){const t=Te(Re({fetchPolicy:"network-only",errorPolicy:"none"},this.defaultOptions.mutate),e);return Ee(t.mutation,i.OperationTypeNode.MUTATION),this.queryManager.mutate(t)}subscribe(e){const t={},r=this.queryManager.startGraphQLSubscription(e),i=r.pipe((0,n.map)((r=>({...r,data:this.queryManager.maskOperation({document:e.query,data:r.data,fetchPolicy:e.fetchPolicy,cause:t})}))));return Object.assign(i,{restart:r.restart})}readQuery(e,t=!1){return this.cache.readQuery({...e,query:this.transform(e.query)},t)}watchFragment(e){const t=this.queryManager.dataMasking;return this.cache.watchFragment({...e,fragment:this.transform(e.fragment,t)}).pipe((0,n.map)((e=>e)))}readFragment(e,t=!1){return this.cache.readFragment({...e,fragment:this.transform(e.fragment)},t)}writeQuery(e){const t=this.cache.writeQuery(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t}writeFragment(e){const t=this.cache.writeFragment(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t}__actionHookForDevTools(e){this.devToolsHookCb=e}__requestRaw(e){return qe(this.link,e,{client:this})}resetStore(){return Promise.resolve().then((()=>this.queryManager.clearStore({discardWatches:!1}))).then((()=>Promise.all(this.resetStoreCallbacks.map((e=>e()))))).then((()=>this.refetchObservableQueries()))}clearStore(){return Promise.resolve().then((()=>this.queryManager.clearStore({discardWatches:!0}))).then((()=>Promise.all(this.clearStoreCallbacks.map((e=>e())))))}onResetStore(e){return this.resetStoreCallbacks.push(e),()=>{this.resetStoreCallbacks=this.resetStoreCallbacks.filter((t=>t!==e))}}onClearStore(e){return this.clearStoreCallbacks.push(e),()=>{this.clearStoreCallbacks=this.clearStoreCallbacks.filter((t=>t!==e))}}reFetchObservableQueries;refetchObservableQueries(e){return this.queryManager.refetchObservableQueries(e)}refetchQueries(e){const t=this.queryManager.refetchQueries(e),r=[],i=[];t.forEach(((e,t)=>{r.push(t),i.push(e)}));const n=Promise.all(i);return n.queries=r,n.results=i,n.catch((e=>{})),n}getObservableQueries(e="active"){return this.queryManager.getObservableQueries(e)}extract(e){return this.cache.extract(e)}restore(e){return this.cache.restore(e)}setLink(e){this.link=e}get defaultContext(){return this.queryManager.defaultContext}maskedFragmentTransform=new Pe(Me);transform(e,t=!1){const r=this.queryManager.transform(e);return t?this.maskedFragmentTransform.transformDocument(r):r}}class nr extends Error{static is(e){return We(e,"LocalStateError")}path;constructor(e,t={}){super(e,{cause:t.sourceError}),this.name="LocalStateError",this.path=t.path,Le(this),Object.setPrototypeOf(this,nr.prototype)}}class sr extends Error{static is(e){return We(e,"ServerError")}response;statusCode;bodyText;constructor(e,t){super(e),this.name="ServerError",this.response=t.response,this.statusCode=t.response.status,this.bodyText=t.bodyText,Le(this),Object.setPrototypeOf(this,sr.prototype)}}class ar extends Error{static is(e){return We(e,"ServerParseError")}response;statusCode;bodyText;constructor(e,t){super(e instanceof Error?e.message:"Could not parse server response",{cause:e}),this.name="ServerParseError",this.response=t.response,this.statusCode=t.response.status,this.bodyText=t.bodyText,Le(this),Object.setPrototypeOf(this,ar.prototype)}}function or(e,t){let r=t;const i=[];e.definitions.forEach((e=>{if("OperationDefinition"===e.kind)throw k(10,e.operation,e.name?` named '${e.name.value}'`:"");"FragmentDefinition"===e.kind&&i.push(e)})),void 0===r&&(g(1===i.length,11,i.length),r=i[0].name.value);return{...e,definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}},...e.definitions]}}class cr{assumeImmutableResults=!1;lookupFragment(e){return null}batch(e){const t="string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;let r;return this.performTransaction((()=>r=e.update(this)),t),r}recordOptimisticTransaction(e,t){this.performTransaction(e,t)}transformDocument(e){return e}transformForLink(e){return e}identify(e){}gc(){return[]}modify(e){return!1}readQuery(e,t=!!e.optimistic){return this.read({...e,rootId:e.id||"ROOT_QUERY",optimistic:t})}watchFragment(e){const{fragment:t,fragmentName:r,from:i,optimistic:s=!0,...a}=e,o=this.getFragmentDoc(t,r),c=void 0===i||"string"==typeof i?i:this.identify(i);const l={...a,returnPartialData:!0,id:c,query:o,optimistic:s};let u;return new n.Observable((t=>this.watch({...l,immediate:!0,callback:r=>{let i=r.result;if(null===i&&(i={}),u&&Dt(o,{data:u.result},{data:i},e.variables))return;const n={data:i,dataState:r.complete?"complete":"partial",complete:!!r.complete};r.missing&&(n.missing=r.missing.missing),u={...r,result:i},t.next(n)}})))}getFragmentDoc=Se(or,{max:xe["cache.fragmentQueryDocuments"]||1e3,cache:M});readFragment(e,t=!!e.optimistic){return this.read({...e,query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t})}writeQuery({id:e,data:t,...r}){return this.write(Object.assign(r,{dataId:e||"ROOT_QUERY",result:t}))}writeFragment({id:e,data:t,fragment:r,fragmentName:i,...n}){return this.write(Object.assign(n,{query:this.getFragmentDoc(r,i),dataId:e,result:t}))}updateQuery(e,t){return this.batch({update(r){const i=r.readQuery(e),n=t(i);return null==n?i:(r.writeQuery({...e,data:n}),n)}})}updateFragment(e,t){return this.batch({update(r){const i=r.readFragment(e),n=t(i);return null==n?i:(r.writeFragment({...e,data:n}),n)}})}}function lr(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}const{hasOwnProperty:ur}=Object.prototype,hr=function(e,t,r){return this.merge(e[r],t[r])};class dr{reconciler;constructor(e=hr){this.reconciler=e}merge(e,t,...r){return et(t)&&et(e)?(Object.keys(t).forEach((i=>{if(ur.call(e,i)){const n=e[i];if(t[i]!==n){const s=this.reconciler(e,t,i,...r);s!==n&&((e=this.shallowCopyForMerge(e))[i]=s)}}else(e=this.shallowCopyForMerge(e))[i]=t[i]})),e):t}isObject=et;pastCopies=new Set;shallowCopyForMerge(e){return et(e)&&(this.pastCopies.has(e)||(e=Array.isArray(e)?e.slice(0):{__proto__:Object.getPrototypeOf(e),...e},this.pastCopies.add(e))),e}}const{hasOwnProperty:fr}=Object.prototype;function pr({__typename:e,id:t,_id:r},i){if("string"==typeof e&&(i&&(i.keyObject=null!=t?{id:t}:null!=r?{_id:r}:void 0),null==t&&null!=r&&(t=r),null!=t))return`${e}:${"number"==typeof t||"string"==typeof t?t:JSON.stringify(t)}`}const yr={dataIdFromObject:pr,resultCaching:!0};const mr=/^[_a-z][_0-9a-z]*/i;function br(e){const t=e.match(mr);return t?t[0]:e}function gr(e,t,r){return!!et(t)&&(Et(t)?t.every((t=>gr(e,t,r))):e.selections.every((e=>{if(jt(e)&&It(e,r)){const i=tt(e);return fr.call(t,i)&&(!e.selectionSet||gr(e.selectionSet,t[i],r))}return!0})))}function vr(e){return et(e)&&!lr(e)&&!Et(e)}function wr(e,t){const r=Xe(Ze(e));return{fragmentMap:r,lookupFragment(e){let i=r[e];return!i&&t&&(i=t.lookup(e)),i||null}}}const kr={kind:i.Kind.FIELD,name:{kind:i.Kind.NAME,value:"__typename"}},Sr=Object.assign((function(e){return(0,i.visit)(e,{SelectionSet:{enter(e,t,r){if(r&&r.kind===i.Kind.OPERATION_DEFINITION)return;const{selections:n}=e;if(!n)return;if(n.some((e=>e.kind===i.Kind.FIELD&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0)))))return;const s=r;return s.kind===i.Kind.FIELD&&s.directives&&s.directives.some((e=>"export"===e.name.value))?void 0:{...e,selections:[...n,kr]}}}})}),{added:e=>e===kr});function Or(e){return{__ref:String(e)}}const xr={},Er=()=>xr,Fr={};class Cr{policies;group;data={};constructor(e,t){this.policies=e,this.group=t}toObject(){return{...this.data}}has(e){return void 0!==this.lookup(e,!0)}get(e,t){if(this.group.depend(e,t),fr.call(this.data,e)){const r=this.data[e];if(r&&fr.call(r,t))return r[t]}return"__typename"===t&&fr.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof Rr?this.parent.get(e,t):void 0}lookup(e,t){return t&&this.group.depend(e,"__exists"),fr.call(this.data,e)?this.data[e]:this instanceof Rr?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?{}:void 0}merge(e,t){let r;lr(e)&&(e=e.__ref),lr(t)&&(t=t.__ref);const i="string"==typeof e?this.lookup(r=e):e,n="string"==typeof t?this.lookup(r=t):t;if(!n)return;g("string"==typeof r,95);const s=new dr(Mr).merge(i,n);if(this.data[r]=s,s!==i&&(delete this.refs[r],this.group.caching)){const e={};i||(e.__exists=1),Object.keys(n).forEach((t=>{if(!i||i[t]!==s[t]){e[t]=1;const r=br(t);r===t||this.policies.hasKeyArgs(s.__typename,r)||(e[r]=1),void 0!==s[t]||this instanceof Rr||delete s[t]}})),!e.__typename||i&&i.__typename||this.policies.rootTypenamesById[r]!==s.__typename||delete e.__typename,Object.keys(e).forEach((e=>this.group.dirty(r,e)))}}modify(e,t,r){const i=this.lookup(e);if(i){const n={};let s=!1,a=!0;const o={DELETE:xr,INVALIDATE:Fr,isReference:lr,toReference:this.toReference,canRead:this.canRead,readField:(t,r)=>this.policies.readField("string"==typeof t?{fieldName:t,from:r||Or(e)}:t,{store:this})};if(Object.keys(i).forEach((c=>{const l=br(c);let u=i[c];if(void 0===u)return;const h="function"==typeof t?t:t[c]||(r?void 0:t[l]);if(h){let t=h===Er?xr:h(u,{...o,fieldName:l,storeFieldName:c,storage:this.getStorage(e,c)});t===Fr?this.group.dirty(e,c):(t===xr&&(t=void 0),t!==u&&(n[c]=t,s=!0,u=t))}void 0!==u&&(a=!1)})),s)return this.merge(e,n),a&&(this instanceof Rr?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1}delete(e,t,r){const i=this.lookup(e);if(i){const n=this.getFieldValue(i,"__typename"),s=t&&r?this.policies.getStoreFieldName({typename:n,fieldName:t,args:r}):t;return this.modify(e,s?{[s]:Er}:Er,!!r)}return!1}evict(e,t){let r=!1;return e.id&&(fr.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof Rr&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r}clear(){this.replace(null)}extract(){const e=this.toObject(),t=[];return this.getRootIdSet().forEach((e=>{fr.call(this.policies.rootTypenamesById,e)||t.push(e)})),t.length&&(e.__META={extraRootIds:t.sort()}),e}replace(e){if(Object.keys(this.data).forEach((t=>{e&&fr.call(e,t)||this.delete(t)})),e){const{__META:t,...r}=e;Object.keys(r).forEach((e=>{this.merge(e,r[e])})),t&&t.extraRootIds.forEach(this.retain,this)}}rootIds={};retain(e){return this.rootIds[e]=(this.rootIds[e]||0)+1}release(e){if(this.rootIds[e]>0){const t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0}getRootIdSet(e=new Set){return Object.keys(this.rootIds).forEach(e.add,e),this instanceof Rr?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e}gc(){const e=this.getRootIdSet(),t=this.toObject();e.forEach((r=>{fr.call(t,r)&&(Object.keys(this.findChildRefIds(r)).forEach(e.add,e),delete t[r])}));const r=Object.keys(t);if(r.length){let e=this;for(;e instanceof Rr;)e=e.parent;r.forEach((t=>e.delete(t)))}return r}refs={};findChildRefIds(e){if(!fr.call(this.refs,e)){const t=this.refs[e]={},r=this.data[e];if(!r)return t;const i=new Set([r]);i.forEach((e=>{lr(e)&&(t[e.__ref]=!0),et(e)&&Object.keys(e).forEach((t=>{const r=e[t];et(r)&&i.add(r)}))}))}return this.refs[e]}makeCacheKey(){return this.group.keyMaker.lookupArray(arguments)}getFieldValue=(e,t)=>lr(e)?this.get(e.__ref,t):e&&e[t];canRead=e=>lr(e)?this.has(e.__ref):"object"==typeof e;toReference=(e,t)=>{if("string"==typeof e)return Or(e);if(lr(e))return e;const[r]=this.policies.identify(e);if(r){const i=Or(r);return t&&this.merge(r,e),i}};get supportsResultCaching(){return this.group.caching}}class qr{caching;parent;d=null;keyMaker;constructor(e,t=null){this.caching=e,this.parent=t,this.resetCaching()}resetCaching(){this.d=this.caching?ge():null,this.keyMaker=new Q}depend(e,t){if(this.d){this.d(_r(e,t));const r=br(t);r!==t&&this.d(_r(e,r)),this.parent&&this.parent.depend(e,t)}}dirty(e,t){this.d&&this.d.dirty(_r(e,t),"__exists"===t?"forget":"setDirty")}}function _r(e,t){return t+"#"+e}function Pr(e,t){Nr(e)&&e.group.depend(t,"__exists")}Cr.Root=class extends Cr{constructor({policies:e,resultCaching:t=!0,seed:r}){super(e,new qr(t)),r&&this.replace(r)}stump=new Tr(this);addLayer(e,t){return this.stump.addLayer(e,t)}removeLayer(){return this}storageTrie=new Q;getStorage(){return this.storageTrie.lookupArray(arguments)}};class Rr extends Cr{id;parent;replay;group;constructor(e,t,r,i){super(t.policies,i),this.id=e,this.parent=t,this.replay=r,this.group=i,r(this)}addLayer(e,t){return new Rr(e,this,t,this.group)}removeLayer(e){const t=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((e=>{const r=this.data[e],i=t.lookup(e);i?r?r!==i&&Object.keys(r).forEach((t=>{ut(r[t],i[t])||this.group.dirty(e,t)})):(this.group.dirty(e,"__exists"),Object.keys(i).forEach((t=>{this.group.dirty(e,t)}))):this.delete(e)})),t):t===this.parent?this:t.addLayer(this.id,this.replay)}toObject(){return{...this.parent.toObject(),...this.data}}findChildRefIds(e){const t=this.parent.findChildRefIds(e);return fr.call(this.data,e)?{...t,...super.findChildRefIds(e)}:t}getStorage(...e){let t=this.parent;for(;t.parent;)t=t.parent;return t.getStorage(...e)}}class Tr extends Rr{constructor(e){super("EntityStore.Stump",e,(()=>{}),new qr(e.group.caching,e.group))}removeLayer(){return this}merge(e,t){return this.parent.merge(e,t)}}function Mr(e,t,r){const i=e[r],n=t[r];return ut(i,n)?i:n}function Nr(e){return!(!e||!e.supportsResultCaching)}function jr(e,t){if(e.arguments&&e.arguments.length){const r={};return e.arguments.forEach((({name:e,value:i})=>Pt(r,e,i,t))),r}return null}const Ir=["connection","include","skip","client","rest","export","nonreactive"];let Dr=Qe;const Qr=Object.assign((function(e,t,r){if(t&&r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){const e=r.connection.filter?r.connection.filter:[];e.sort();const i={};e.forEach((e=>{i[e]=t[e]}));const n=Dr(i);if("{}"!==n)return`${r.connection.key}(${n})`}return r.connection.key}let i=e;if(t){const e=Dr(t);"{}"!==e&&(i+=`(${e})`)}return r&&Object.keys(r).forEach((e=>{-1===Ir.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?i+=`@${e}(${Dr(r[e])})`:i+=`@${e}`)})),i}),{setStringify(e){const t=Dr;return Dr=e,t}});const Ar={};function Vr(e){const t=JSON.stringify(e);return Ar[t]||(Ar[t]={})}function zr(e){const t=Vr(e);return t.keyFieldsFn||(t.keyFieldsFn=(t,r)=>{const i=(e,t)=>r.readField(t,e),n=r.keyObject=Lr(e,(e=>{let n=Ur(r.storeObject,e,i);return void 0===n&&t!==r.storeObject&&fr.call(t,e[0])&&(n=Ur(t,e,Kr)),g(void 0!==n,98,e.join("."),t),n}));return`${r.typename}:${JSON.stringify(n)}`})}function Wr(e){const t=Vr(e);return t.keyArgsFn||(t.keyArgsFn=(t,{field:r,variables:i,fieldName:n})=>{const s=Lr(e,(e=>{const n=e[0],s=n.charAt(0);if("@"!==s)if("$"!==s){if(t)return Ur(t,e)}else{const t=n.slice(1);if(i&&fr.call(i,t)){const r=e.slice(0);return r[0]=t,Ur(i,r)}}else if(r&&Ft(r.directives)){const t=n.slice(1),s=r.directives.find((e=>e.name.value===t)),a=s&&jr(s,i);return a&&Ur(a,e.slice(1))}})),a=JSON.stringify(s);return(t||"{}"!==a)&&(n+=":"+a),n})}function Lr(e,t){const r=new dr;return Br(e).reduce(((e,i)=>{let n=t(i);if(void 0!==n){for(let e=i.length-1;e>=0;--e)n={[i[e]]:n};e=r.merge(e,n)}return e}),{})}function Br(e){const t=Vr(e);if(!t.paths){const r=t.paths=[],i=[];e.forEach(((t,n)=>{Et(t)?(Br(t).forEach((e=>r.push(i.concat(e)))),i.length=0):(i.push(t),Et(e[n+1])||(r.push(i.slice(0)),i.length=0))}))}return t.paths}function Kr(e,t){return e[t]}function Ur(e,t,r){return r=r||Kr,Hr(t.reduce((function e(t,i){return Et(t)?t.map((t=>e(t,i))):t&&r(t,i)}),e))}function Hr(e){return et(e)?Et(e)?e.map(Hr):Lr(Object.keys(e).sort(),(t=>Ur(e,t))):e}const $r=new H,Gr=new WeakMap;function Jr(e){let t=Gr.get(e);return t||Gr.set(e,t={vars:new Set,dep:ge()}),t}function Yr(e){Jr(e).vars.forEach((t=>t.forgetCache(e)))}function Xr(e){const t=new Set,r=new Set,i=function(s){if(arguments.length>0){if(e!==s){e=s,t.forEach((e=>{Jr(e).dep.dirty(i),function(e){e.broadcastWatches&&e.broadcastWatches()}(e)}));const n=Array.from(r);r.clear(),n.forEach((t=>t(e)))}}else{const e=$r.getValue();e&&(n(e),Jr(e).dep(i))}return e};i.onNextChange=e=>(r.add(e),()=>{r.delete(e)});const n=i.attachCache=e=>(t.add(e),Jr(e).vars.add(i),i);return i.forgetCache=e=>t.delete(e),i}function Zr(e){return void 0!==e.args?e.args:e.field?jr(e.field,e.variables):null}const ei=()=>{},ti=(e,t)=>t.fieldName,ri=(e,t,{mergeObjects:r})=>r(e,t),ii=(e,t)=>t;class ni{config;typePolicies={};toBeAdded={};supertypeMap=new Map;fuzzySubtypes=new Map;cache;rootIdsByTypename={};rootTypenamesById={};usingPossibleTypes=!1;constructor(e){this.config=e,this.config={dataIdFromObject:pr,...e},this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}identify(e,t){const r=this,i=t&&(t.typename||t.storeObject?.__typename)||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];const n=t&&t.storeObject||e,s={...t,typename:i,storeObject:n,readField:t&&t.readField||((...e)=>{const t=ai(e,n);return r.readField(t,{store:r.cache.data,variables:t.variables})})};let a;const o=i&&this.getTypePolicy(i);let c=o&&o.keyFn||this.config.dataIdFromObject;return rt.withValue(!0,(()=>{for(;c;){const t=c({...e,...n},s);if(!Et(t)){a=t;break}c=zr(t)}})),a=a?String(a):void 0,s.keyObject?[a,s.keyObject]:[a]}addTypePolicies(e){Object.keys(e).forEach((t=>{const{queryType:r,mutationType:i,subscriptionType:n,...s}=e[t];r&&this.setRootTypename("Query",t),i&&this.setRootTypename("Mutation",t),n&&this.setRootTypename("Subscription",t),fr.call(this.toBeAdded,t)?this.toBeAdded[t].push(s):this.toBeAdded[t]=[s]}))}updateTypePolicy(e,t,r){const i=this.getTypePolicy(e),{keyFields:n,fields:s}=t;function a(e,t){e.merge="function"==typeof t?t:!0===t?ri:!1===t?ii:e.merge}a(i,t.merge),i.keyFn=!1===n?ei:Et(n)?zr(n):"function"==typeof n?n:i.keyFn,s&&Object.keys(s).forEach((t=>{let i=r[t];i&&i?.typename===e||(i=r[t]={typename:e});const n=s[t];if("function"==typeof n)i.read=n;else{const{keyArgs:e,read:t,merge:r}=n;i.keyFn=!1===e?ti:Et(e)?Wr(e):"function"==typeof e?e:i.keyFn,"function"==typeof t&&(i.read=t),a(i,r)}i.read&&i.merge&&(i.keyFn=i.keyFn||ti)}))}setRootTypename(e,t=e){const r="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[r];t!==i&&(g(!i||i===e,99,e),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)}addPossibleTypes(e){this.usingPossibleTypes=!0,Object.keys(e).forEach((t=>{this.getSupertypeSet(t,!0),e[t].forEach((e=>{this.getSupertypeSet(e,!0).add(t);const r=e.match(mr);r&&r[0]===e||this.fuzzySubtypes.set(e,new RegExp(e))}))}))}getTypePolicy(e){if(!fr.call(this.typePolicies,e)){const t=this.typePolicies[e]={};t.fields={};let r=this.supertypeMap.get(e);!r&&this.fuzzySubtypes.size&&(r=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(((t,i)=>{if(t.test(e)){const e=this.supertypeMap.get(i);e&&e.forEach((e=>r.add(e)))}}))),r&&r.size&&r.forEach((e=>{const{fields:r,...i}=this.getTypePolicy(e);Object.assign(t,i),Object.assign(t.fields,r)}))}const t=this.toBeAdded[e];return t&&t.length&&t.splice(0).forEach((t=>{this.updateTypePolicy(e,t,this.typePolicies[e].fields)})),this.typePolicies[e]}getFieldPolicy(e,t){if(e)return this.getTypePolicy(e).fields[t]}getSupertypeSet(e,t){let r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r}fragmentMatches(e,t,r,i){if(!e.typeCondition)return!0;if(!t)return!1;const n=e.typeCondition.name.value;if(t===n)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(n)){const s=this.getSupertypeSet(t,!0),a=[s],o=e=>{const t=this.getSupertypeSet(e,!1);t&&t.size&&a.indexOf(t)<0&&a.push(t)};let c=!(!r||!this.fuzzySubtypes.size),l=!1;for(let u=0;u<a.length;++u){const h=a[u];if(h.has(n))return s.has(n)||s.add(n),!0;h.forEach(o),c&&u===a.length-1&&gr(e.selectionSet,r,i)&&(c=!1,l=!0,this.fuzzySubtypes.forEach(((e,r)=>{const i=t.match(e);i&&i[0]===t&&o(r)})))}}return!1}hasKeyArgs(e,t){const r=this.getFieldPolicy(e,t);return!(!r||!r.keyFn)}getStoreFieldName(e){const{typename:t,fieldName:r}=e,i=this.getFieldPolicy(t,r);let n,s=i&&i.keyFn;if(s&&t){const i={typename:t,fieldName:r,field:e.field||null,variables:e.variables},a=Zr(e);for(;s;){const e=s(a,i);if(!Et(e)){n=e||r;break}s=Wr(e)}}return void 0===n&&(n=e.field?function(e,t){let r=null;e.directives&&(r={},e.directives.forEach((e=>{r[e.name.value]={},e.arguments&&e.arguments.forEach((({name:i,value:n})=>Pt(r[e.name.value],i,n,t)))})));let i=null;return e.arguments&&e.arguments.length&&(i={},e.arguments.forEach((({name:e,value:r})=>Pt(i,e,r,t)))),Qr(e.name.value,i,r)}(e.field,e.variables):Qr(r,Zr(e))),!1===n?r:r===br(n)?n:r+":"+n}readField(e,t){const r=e.from;if(!r)return;if(!(e.field||e.fieldName))return;if(void 0===e.typename){const i=t.store.getFieldValue(r,"__typename");i&&(e.typename=i)}const i=this.getStoreFieldName(e),n=br(i),s=t.store.getFieldValue(r,i),a=this.getFieldPolicy(e.typename,n),o=a&&a.read;if(o){const n=si(this,r,e,t,t.store.getStorage(lr(r)?r.__ref:r,i));return $r.withValue(this.cache,o,[s,n])}return s}getReadFunction(e,t){const r=this.getFieldPolicy(e,t);return r&&r.read}getMergeFunction(e,t,r){let i=this.getFieldPolicy(e,t),n=i&&i.merge;return!n&&r&&(i=this.getTypePolicy(r),n=i&&i.merge),n}runMergeFunction(e,t,{field:r,typename:i,merge:n},s,a){return n===ri?oi(s.store)(e,t):n===ii?t:(s.overwrite&&(e=void 0),n(e,t,si(this,void 0,{typename:i,fieldName:r.name.value,field:r,variables:s.variables},s,a||{})))}}function si(e,t,r,i,n){const s=e.getStoreFieldName(r),a=br(s),o=r.variables||i.variables,{toReference:c,canRead:l}=i.store;return{args:Zr(r),field:r.field||null,fieldName:a,storeFieldName:s,variables:o,isReference:lr,toReference:c,storage:n,cache:e.cache,canRead:l,readField:(...r)=>e.readField(ai(r,t,o),i),mergeObjects:oi(i.store)}}function ai(e,t,r){const{0:i,1:n,length:s}=e;let a;return"string"==typeof i?a={fieldName:i,from:s>1?n:t}:(a={...i},fr.call(a,"from")||(a.from=t)),void 0===a.variables&&(a.variables=r),a}function oi(e){return function(t,r){if(Et(t)||Et(r))throw k(102);if(et(t)&&et(r)){const i=e.getFieldValue(t,"__typename"),n=e.getFieldValue(r,"__typename");if(i&&n&&i!==n)return r;if(lr(t)&&vr(r))return e.merge(t.__ref,r),t;if(vr(t)&&lr(r))return e.merge(t,r.__ref),r;if(vr(t)&&vr(r))return{...t,...r}}return r}}class ci extends Error{message;path;query;variables;constructor(e,t,r,i){if(super(e),this.message=e,this.path=t,this.query=r,this.variables=i,this.name="MissingFieldError",Array.isArray(this.path)){this.missing=this.message;for(let e=this.path.length-1;e>=0;--e)this.missing={[this.path[e]]:this.missing}}else this.missing=this.path;this.__proto__=ci.prototype}missing}function li(e){return[e.selectionSet,e.objectOrReference,e.context]}class ui{executeSelectionSet;executeSubSelectedArray;config;knownResults=new WeakMap;constructor(e){this.config=e,this.executeSelectionSet=Se((e=>{const t=li(e),r=this.executeSelectionSet.peek(...t);return r||(Pr(e.context.store,e.enclosingRef.__ref),this.execSelectionSetImpl(e))}),{max:xe["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:li,makeCacheKey(e,t,r){if(Nr(r.store))return r.store.makeCacheKey(e,lr(t)?t.__ref:t,r.varString)}}),this.executeSubSelectedArray=Se((e=>(Pr(e.context.store,e.enclosingRef.__ref),this.execSubSelectedArrayImpl(e))),{max:xe["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey({field:e,array:t,context:r}){if(Nr(r.store))return r.store.makeCacheKey(e,t,r.varString)}})}diffQueryAgainstStore({store:e,query:t,rootId:r="ROOT_QUERY",variables:i,returnPartialData:n=!0}){const s=this.config.cache.policies;i={...Rt(zt(t)),...i};const a=Or(r),o=this.executeSelectionSet({selectionSet:Nt(t).selectionSet,objectOrReference:a,enclosingRef:a,context:{store:e,query:t,policies:s,variables:i,varString:Qe(i),...wr(t,this.config.fragments)}});let c;o.missing&&(c=new ci(function(e){try{JSON.stringify(e,((e,t)=>{if("string"==typeof t)throw t;return t}))}catch(e){return e}}(o.missing),o.missing,t,i));const l=!c,{result:u}=o;return{result:l||n?0===Object.keys(u).length?null:u:null,complete:l,missing:c}}isFresh(e,t,r,i){if(Nr(i.store)&&this.knownResults.get(e)===r){const n=this.executeSelectionSet.peek(r,t,i);if(n&&e===n.result)return!0}return!1}execSelectionSetImpl({selectionSet:e,objectOrReference:t,enclosingRef:r,context:n}){if(lr(t)&&!n.policies.rootTypenamesById[t.__ref]&&!n.store.has(t.__ref))return{result:{},missing:`Dangling reference to missing ${t.__ref} object`};const{variables:s,policies:a,store:o}=n,c=o.getFieldValue(t,"__typename"),l=[];let u;const h=new dr;function d(e,t){return e.missing&&(u=h.merge(u,{[t]:e.missing})),e.result}"string"!=typeof c||a.rootIdsByTypename[c]||l.push({__typename:c});const f=new Set(e.selections);f.forEach((e=>{if(It(e,s))if(jt(e)){let i=a.readField({fieldName:e.name.value,field:e,variables:n.variables,from:t},n);const s=tt(e);void 0===i?Sr.added(e)||(u=h.merge(u,{[s]:`Can't find field '${e.name.value}' on ${lr(t)?t.__ref+" object":"object "+JSON.stringify(t,null,2)}`})):Et(i)?i.length>0&&(i=d(this.executeSubSelectedArray({field:e,array:i,enclosingRef:r,context:n}),s)):e.selectionSet&&null!=i&&(i=d(this.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:i,enclosingRef:lr(i)?i:r,context:n}),s)),void 0!==i&&l.push({[s]:i})}else{const t=Mt(e,n.lookupFragment);if(!t&&e.kind===i.Kind.FRAGMENT_SPREAD)throw k(103,e.name.value);t&&a.fragmentMatches(t,c)&&t.selectionSet.selections.forEach(f.add,f)}}));const p={result:function(e){let t=e[0]||{};const r=e.length;if(r>1){const i=new dr;for(let n=1;n<r;++n)t=i.merge(t,e[n])}return t}(l),missing:u};return p.result&&this.knownResults.set(p.result,e),p}execSubSelectedArrayImpl({field:e,array:t,enclosingRef:r,context:i}){let n,s=new dr;function a(e,t){return e.missing&&(n=s.merge(n,{[t]:e.missing})),e.result}return e.selectionSet&&(t=t.filter(i.store.canRead)),{result:t=t.map(((t,n)=>null===t?null:Et(t)?a(this.executeSubSelectedArray({field:e,array:t,enclosingRef:r,context:i}),n):e.selectionSet?a(this.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:t,enclosingRef:lr(t)?t:r,context:i}),n):t)),missing:n}}}const{toString:hi}=Object.prototype;function di(e,t,r){const i=`${t}${r}`;let n=e.flavors.get(i);return n||e.flavors.set(i,n=e.clientOnly===t&&e.deferred===r?e:{...e,clientOnly:t,deferred:r}),n}class fi{cache;reader;fragments;constructor(e,t,r){this.cache=e,this.reader=t,this.fragments=r}writeToStore(e,{query:t,result:r,dataId:i,variables:n,overwrite:s}){const a=Fe(t),o=new dr;n={...Rt(a),...n};const c={store:e,written:{},merge:(e,t)=>o.merge(e,t),variables:n,varString:Qe(n),...wr(t,this.fragments),overwrite:!!s,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},l=this.processSelectionSet({result:r||{},dataId:i,selectionSet:a.selectionSet,mergeTree:{map:new Map},context:c});if(!lr(l))throw k(105,r);return c.incomingById.forEach((({storeObject:t,mergeTree:r,fieldNodeSet:i},n)=>{const s=Or(n);if(r&&r.map.size){const e=this.applyMerges(r,s,t,c);if(lr(e))return;t=e}e.merge(n,t)})),e.retain(l.__ref),l}processSelectionSet({dataId:e,result:t,selectionSet:r,context:i,mergeTree:n}){const{policies:s}=this.cache;let o={};const c=e&&s.rootTypenamesById[e]||vi(t,r,i.fragmentMap)||e&&i.store.get(e,"__typename");"string"==typeof c&&(o.__typename=c);const l=(...e)=>{const t=ai(e,o,i.variables);if(lr(t.from)){const e=i.incomingById.get(t.from.__ref);if(e){const r=s.readField({...t,from:e.storeObject},i);if(void 0!==r)return r}}return s.readField(t,i)},u=new Set;this.flattenFields(r,t,i,c).forEach(((e,r)=>{const i=tt(r),h=t[i];if(u.add(r),void 0!==h){const t=s.getStoreFieldName({typename:c,fieldName:r.name.value,field:r,variables:e.variables}),i=yi(n,t);let a,u=this.processFieldValue(h,r,r.selectionSet?di(e,!1,!1):e,i);r.selectionSet&&(lr(u)||vr(u))&&(a=l("__typename",u));const d=s.getMergeFunction(c,r.name.value,a);d?i.info={field:r,typename:c,merge:d}:gi(n,t),o=e.merge(o,{[t]:u})}else a}));try{const[n,a]=s.identify(t,{typename:c,selectionSet:r,fragmentMap:i.fragmentMap,storeObject:o,readField:l});e=e||n,a&&(o=i.merge(o,a))}catch(t){if(!e)throw t}if("string"==typeof e){const s=Or(e),a=i.written[e]||(i.written[e]=[]);if(a.indexOf(r)>=0)return s;if(a.push(r),this.reader&&this.reader.isFresh(t,s,r,i))return s;const c=i.incomingById.get(e);return c?(c.storeObject=i.merge(c.storeObject,o),c.mergeTree=mi(c.mergeTree,n),u.forEach((e=>c.fieldNodeSet.add(e)))):i.incomingById.set(e,{storeObject:o,mergeTree:bi(n)?void 0:n,fieldNodeSet:u}),s}return o}processFieldValue(e,t,r,i){return t.selectionSet&&null!==e?Et(e)?e.map(((e,n)=>{const s=this.processFieldValue(e,t,r,yi(i,n));return gi(i,n),s})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:i}):e}flattenFields(e,t,r,n=vi(t,e,r.fragmentMap)){const s=new Map,{policies:a}=this.cache,o=new Q(!1);return function e(c,l){const u=o.lookup(c,l.clientOnly,l.deferred);u.visited||(u.visited=!0,c.selections.forEach((o=>{if(!It(o,r.variables))return;let{clientOnly:c,deferred:u}=l;if(c&&u||!Ft(o.directives)||o.directives.forEach((e=>{const t=e.name.value;if("client"===t&&(c=!0),"defer"===t){const t=jr(e,r.variables);t&&!1===t.if||(u=!0)}})),jt(o)){const e=s.get(o);e&&(c=c&&e.clientOnly,u=u&&e.deferred),s.set(o,di(r,c,u))}else{const s=Mt(o,r.lookupFragment);if(!s&&o.kind===i.Kind.FRAGMENT_SPREAD)throw k(107,o.name.value);s&&a.fragmentMatches(s,n,t,r.variables)&&e(s.selectionSet,di(r,c,u))}})))}(e,r),s}applyMerges(e,t,r,i,n){if(e.map.size&&!lr(r)){const s=Et(r)||!lr(t)&&!vr(t)?void 0:t,a=r;let o;s&&!n&&(n=[lr(s)?s.__ref:s]);const c=(e,t)=>Et(e)?"number"==typeof t?e[t]:void 0:i.store.getFieldValue(e,String(t));e.map.forEach(((e,t)=>{const r=c(s,t),l=c(a,t);if(void 0===l)return;n&&n.push(t);const u=this.applyMerges(e,r,l,i,n);u!==l&&(o=o||new Map,o.set(t,u)),n&&g(n.pop()===t)})),o&&(r=Et(a)?a.slice(0):{...a},o.forEach(((e,t)=>{r[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,i,n&&i.store.getStorage(...n)):r}}const pi=[];function yi({map:e},t){return e.has(t)||e.set(t,pi.pop()||{map:new Map}),e.get(t)}function mi(e,t){if(e===t||!t||bi(t))return e;if(!e||bi(e))return t;const r=e.info&&t.info?{...e.info,...t.info}:e.info||t.info,i=e.map.size&&t.map.size,n={info:r,map:i?new Map:e.map.size?e.map:t.map};if(i){const r=new Set(t.map.keys());e.map.forEach(((e,i)=>{n.map.set(i,mi(e,t.map.get(i))),r.delete(i)})),r.forEach((r=>{n.map.set(r,mi(t.map.get(r),e.map.get(r)))}))}return n}function bi(e){return!e||!(e.info||e.map.size)}function gi({map:e},t){const r=e.get(t);r&&bi(r)&&(pi.push(r),e.delete(t))}new Set;function vi(e,t,r){let i;for(const r of t.selections)if(jt(r)){if("__typename"===r.name.value)return e[tt(r)]}else i?i.push(r):i=[r];if("string"==typeof e.__typename)return e.__typename;if(i)for(const t of i){const i=vi(e,Mt(t,r).selectionSet,r);if("string"==typeof i)return i}}class wi extends cr{data;optimisticData;config;watches=new Set;storeReader;storeWriter;addTypenameTransform=new Pe(Sr);maybeBroadcastWatch;assumeImmutableResults=!0;policies;makeVar=Xr;constructor(e={}){super(),this.config=function(e){return Re(yr,e)}(e),this.policies=new ni({cache:this,dataIdFromObject:this.config.dataIdFromObject,possibleTypes:this.config.possibleTypes,typePolicies:this.config.typePolicies}),this.init()}init(){const e=this.data=new Cr.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()}resetResultCache(){const{fragments:e}=this.config;this.addTypenameTransform.resetCache(),e?.resetCaches(),this.storeWriter=new fi(this,this.storeReader=new ui({cache:this,fragments:e}),e),this.maybeBroadcastWatch=Se(((e,t)=>this.broadcastWatch(e,t)),{max:xe["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:e=>{const t=e.optimistic?this.optimisticData:this.data;if(Nr(t)){const{optimistic:r,id:i,variables:n}=e;return t.makeCacheKey(e.query,e.callback,Qe({optimistic:r,id:i,variables:n}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach((e=>e.resetCaching()))}restore(e){return this.init(),e&&this.data.replace(e),this}extract(e=!1){return(e?this.optimisticData:this.data).extract()}read(e){const{returnPartialData:t=!1}=e;return this.storeReader.diffQueryAgainstStore({...e,store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:t}).result}write(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}}modify(e){if(fr.call(e,"id")&&!e.id)return!1;const t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields,!1)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}}diff(e){return this.storeReader.diffQueryAgainstStore({...e,store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config})}watch(e){var t;return this.watches.size||Jr(t=this).vars.forEach((e=>e.attachCache(t))),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),()=>{this.watches.delete(e)&&!this.watches.size&&Yr(this),this.maybeBroadcastWatch.forget(e)}}gc(e){Qe.reset(),bt.reset();const t=this.optimisticData.gc();return e&&!this.txCount&&e.resetResultCache&&this.resetResultCache(),t}retain(e,t){return(t?this.optimisticData:this.data).retain(e)}release(e,t){return(t?this.optimisticData:this.data).release(e)}identify(e){if(lr(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(e){}}evict(e){if(!e.id){if(fr.call(e,"id"))return!1;e={...e,id:"ROOT_QUERY"}}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}}reset(e){return this.init(),Qe.reset(),e&&e.discardWatches?(this.watches.forEach((e=>this.maybeBroadcastWatch.forget(e))),this.watches.clear(),Yr(this)):this.broadcastWatches(),Promise.resolve()}removeOptimistic(e){const t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())}txCount=0;batch(e){const{update:t,optimistic:r=!0,removeOptimistic:i,onWatchUpdated:n}=e;let s;const a=e=>{const{data:r,optimisticData:i}=this;++this.txCount,e&&(this.data=this.optimisticData=e);try{return s=t(this)}finally{--this.txCount,this.data=r,this.optimisticData=i}},o=new Set;return n&&!this.txCount&&this.broadcastWatches({...e,onWatchUpdated:e=>(o.add(e),!1)}),"string"==typeof r?this.optimisticData=this.optimisticData.addLayer(r,a):!1===r?a(this.data):a(),"string"==typeof i&&(this.optimisticData=this.optimisticData.removeLayer(i)),n&&o.size?(this.broadcastWatches({...e,onWatchUpdated(e,t){const r=n.call(this,e,t);return!1!==r&&o.delete(e),r}}),o.size&&o.forEach((e=>this.maybeBroadcastWatch.dirty(e)))):this.broadcastWatches(e),s}performTransaction(e,t){return this.batch({update:e,optimistic:t||null!==t})}transformDocument(e){return this.addTypenameTransform.transformDocument(this.addFragmentsToDocument(e))}fragmentMatches(e,t){return this.policies.fragmentMatches(e,t)}lookupFragment(e){return this.config.fragments?.lookup(e)||null}broadcastWatches(e){this.txCount||this.watches.forEach((t=>this.maybeBroadcastWatch(t,e)))}addFragmentsToDocument(e){const{fragments:t}=this.config;return t?t.transform(e):e}broadcastWatch(e,t){const{lastDiff:r}=e,i=this.diff(e);t&&(e.optimistic&&"string"==typeof t.optimistic&&(i.fromOptimisticTransaction=!0),t.onWatchUpdated&&!1===t.onWatchUpdated.call(this,e,i,r))||r&&ut(r.result,i.result)||e.callback(e.lastDiff=i,r)}}const ki=Ce.concat,Si=Ce.empty,Oi=Ce.from,xi=Ce.split,Ei=e=>{g(e||"undefined"!=typeof fetch,59)};class Fi extends Ce{constructor(e={}){super(((t,r)=>{const i=t.client,n=i.queryManager.clientOptions,s=t.getContext();{const{name:r,version:i,transport:a="headers"}=Re({},n.clientAwareness,e.clientAwareness,s.clientAwareness);"headers"===a&&t.setContext((({headers:e,extensions:t})=>({headers:Re({"apollographql-client-name":r,"apollographql-client-version":i},e)})))}{const{transport:r="extensions"}=Re({},n.enhancedClientAwareness,e.enhancedClientAwareness);"extensions"===r&&(t.extensions=Re({clientLibrary:{name:"@apollo/client",version:i.version}},t.extensions))}return r(t)}))}}function Ci(e,t){return Fe(e)?.operation===t}const{hasOwnProperty:qi}=Object.prototype;async function _i(e,t){for await(const i of async function*(e){const t=new TextDecoder("utf-8"),r=e.headers?.get("content-type"),i=r?.match(/;\s*boundary=(?:'([^']+)'|"([^"]+)"|([^"'].+?))\s*(?:;|$)/i),n="\r\n--"+(i?.findLast((e=>!!e))||"-");let s="";g(e.body&&"function"==typeof e.body.getReader,60);const a=e.body.getReader();let o,c=!1,l=!1;const u=()=>l&&"-"==s[0]&&"-"==s[1];try{for(;!c;){({value:o,done:c}=await a.read());const e="string"==typeof o?o:t.decode(o),r=s.length-n.length+1;s+=e;let i=s.indexOf(n,r);for(;i>-1&&!u();){let e;l=!0,[e,s]=[s.slice(0,i),s.slice(i+n.length)];const t=e.indexOf("\r\n\r\n"),r=Pi(e.slice(0,t))["content-type"];if(r&&-1===r.toLowerCase().indexOf("application/json"))throw new Error("Unsupported patch content type: application/json is required.");const a=e.slice(t);a&&(yield a),i=s.indexOf(n)}if(u())return}throw new Error("premature end of multipart body")}finally{a.cancel()}}(e)){const n=Ri(e,i);if(0!=Object.keys(n).length)if(et(r=n)&&"payload"in r){if(1===Object.keys(n).length&&null===n.payload)return;let e={...n.payload};"errors"in n&&(e.extensions={...e.extensions,[Ge]:new He(n.errors??[])}),t(e)}else t(n)}var r}function Pi(e){const t={};return e.split("\n").forEach((e=>{const r=e.indexOf(":");if(r>-1){const i=e.slice(0,r).trim().toLowerCase(),n=e.slice(r+1).trim();t[i]=n}})),t}function Ri(e,t){if(e.status>=300)throw new sr(`Response not successful: Received status code ${e.status}`,{response:e,bodyText:t});try{return JSON.parse(t)}catch(r){throw new ar(r,{response:e,bodyText:t})}}function Ti(e,t){const r=e.headers.get("content-type");return r?.includes("application/graphql-response+json")?function(e,t){try{return JSON.parse(t)}catch(r){throw new ar(r,{response:e,bodyText:t})}}(e,t):Ri(e,t)}function Mi(e){return t=>t.text().then((r=>{const i=Ti(t,r);if(!Array.isArray(i)&&!qi.call(i,"data")&&!qi.call(i,"errors"))throw new sr(`Server response was malformed for query '${Array.isArray(e)?e.map((e=>e.operationName)):e.operationName}'.`,{response:t,bodyText:r});return i}))}function Ni(e,t){const r=[],i=(e,t)=>{r.push(`${e}=${encodeURIComponent(t)}`)};if("query"in t&&i("query",t.query),t.operationName&&i("operationName",t.operationName),t.variables){let e;try{e=JSON.stringify(t.variables)}catch(e){return{parseError:e}}i("variables",e)}if(t.extensions){let e;try{e=JSON.stringify(t.extensions)}catch(e){return{parseError:e}}i("extensions",e)}let n="",s=e;const a=e.indexOf("#");-1!==a&&(n=e.substr(a),s=e.substr(0,a));const o=-1===s.indexOf("?")?"?":"&";return{newURI:s+o+r.join("&")+n}}const ji={http:{includeQuery:!0,includeExtensions:!0,preserveHeaderCase:!1},headers:{accept:"application/graphql-response+json,application/json;q=0.9","content-type":"application/json"},options:{method:"POST"}},Ii=(e,t)=>t(e);function Di(e,t,...r){return r.unshift(t),Qi(e,Ii,...r)}function Qi(e,t,...r){let i={},n={};r.forEach((e=>{i={...i,...e.options,headers:{...i.headers,...e.headers}},e.credentials&&(i.credentials=e.credentials),i.headers.accept=(e.http?.accept||[]).concat(i.headers.accept).join(","),n={...n,...e.http}})),i.headers=function(e,t){if(!t){const t={};return Object.keys(Object(e)).forEach((r=>{t[r.toLowerCase()]=e[r]})),t}const r={};Object.keys(Object(e)).forEach((t=>{r[t.toLowerCase()]={originalName:t,value:e[t]}}));const i={};return Object.keys(r).forEach((e=>{i[r[e].originalName]=r[e].value})),i}(i.headers,n.preserveHeaderCase);const{operationName:s,extensions:a,variables:o,query:c}=e,l={operationName:s,variables:o};return n.includeExtensions&&Object.keys(a||{}).length&&(l.extensions=a),n.includeQuery&&(l.query=t(c,bt)),{options:i,body:l}}const Ai=(e,t)=>{const r=e.getContext().uri;return r||("function"==typeof t?t(e):t||"/graphql")},Vi=o((()=>fetch));function zi(){}class Wi extends Ce{constructor(e={}){let{uri:t="/graphql",fetch:r,print:s=Ii,includeExtensions:a,preserveHeaderCase:c,useGETForQueries:l,includeUnusedVariables:u=!1,...h}=e;const d={http:Re({includeExtensions:a,preserveHeaderCase:c}),options:h.fetchOptions,credentials:h.credentials,headers:h.headers};super((e=>{let a=Ai(e,t);const c=e.getContext(),h={...c.http};Ci(e.query,"subscription")&&(h.accept=["multipart/mixed;boundary=graphql;subscriptionSpec=1.0",...h.accept||[]]);const f={http:h,options:c.fetchOptions,credentials:c.credentials,headers:c.headers},{options:p,body:y}=Qi(e,s,ji,d,f);y.variables&&!u&&(y.variables=function(e,t){const r={...e},n=new Set(Object.keys(e));return(0,i.visit)(t,{Variable(e,t,r){r&&"VariableDefinition"!==r.kind&&n.delete(e.name.value)}}),n.forEach((e=>{delete r[e]})),r}(y.variables,e.query));let m=new AbortController,b=()=>{m=void 0};if(p.signal){const e=p.signal,t=()=>{m?.abort(e.reason)};e.addEventListener("abort",t,{once:!0}),b=()=>{m?.signal.removeEventListener("abort",b),m=void 0,e.removeEventListener("abort",t),b=zi},m.signal.addEventListener("abort",b,{once:!0})}return p.signal=m.signal,l&&!function(e){return Ci(e,"mutation")}(e.query)&&(p.method="GET"),new n.Observable((t=>{if("GET"===p.method){const{newURI:e,parseError:t}=Ni(a,y);if(t)throw t;a=e}else p.body=JSON.stringify(y);const i=r||o((()=>fetch))||Vi,n=t.next.bind(t);return i(a,p).then((t=>{e.setContext({response:t});const r=t.headers?.get("content-type");return null!==r&&/^multipart\/mixed/i.test(r)?_i(t,n):Mi(e)(t).then(n)})).then((()=>{b(),t.complete()})).catch((e=>{b(),t.error(e)})),()=>{m&&m.abort()}}))}))}}class Li extends Ce{constructor(e={}){const{left:t,right:r,request:i}=Ce.from([new Fi(e),new Wi(e)]);super(i),Object.assign(this,{left:t,right:r})}}const Bi=(e={})=>new Li(e),Ki=()=>{if("undefined"==typeof AbortController)return{controller:!1,signal:!1};const e=new AbortController;return{controller:e,signal:e.signal}};var Ui=r(3606),Hi=new Map,$i=new Map,Gi=!0,Ji=!1;function Yi(e){return e.replace(/[\s,]+/g," ").trim()}function Xi(e){var t=new Set,r=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var i=e.name.value,n=Yi((a=e.loc).source.body.substring(a.start,a.end)),s=$i.get(i);s&&!s.has(n)?Gi&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):s||$i.set(i,s=new Set),s.add(n),t.has(n)||(t.add(n),r.push(e))}else r.push(e);var a})),(0,Ui.Cl)((0,Ui.Cl)({},e),{definitions:r})}function Zi(e){var t=Yi(e);if(!Hi.has(t)){var r=(0,i.parse)(e,{experimentalFragmentVariables:Ji,allowLegacyFragmentVariables:Ji});if(!r||"Document"!==r.kind)throw new Error("Not a valid GraphQL document.");Hi.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(r){var i=e[r];i&&"object"==typeof i&&t.add(i)}))}));var r=e.loc;return r&&(delete r.startToken,delete r.endToken),e}(Xi(r)))}return Hi.get(t)}function en(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"==typeof e&&(e=[e]);var i=e[0];return t.forEach((function(t,r){t&&"Document"===t.kind?i+=t.loc.source.body:i+=t,i+=e[r+1]})),Zi(i)}function tn(){Hi.clear(),$i.clear()}function rn(){Gi=!1}function nn(){Ji=!0}function sn(){Ji=!1}var an,on=en,cn=tn,ln=rn,un=nn,hn=sn;(an=en||(en={})).gql=on,an.resetCaches=cn,an.disableFragmentWarnings=ln,an.enableExperimentalFragmentVariables=un,an.disableExperimentalFragmentVariables=hn,en.default=en}}]);